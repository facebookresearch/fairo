(this.webpackJsonpdashboard = this.webpackJsonpdashboard || []).push([[1], { 168: function (e, t, a) { }, 169: function (e, t, a) { }, 170: function (e, t, a) { }, 171: function (e, t, a) { }, 174: function (e, t, a) { }, 179: function (e, t, a) { }, 231: function (e, t, a) { }, 265: function (e, t, a) { e.exports = a(386) }, 34: function (e, t, a) { "use strict"; var n = a(7), i = a(8), o = a(145), r = a.n(o), s = a(63), l = a(97), c = a(50), u = a(78), h = a(66), m = a(76), p = a(94), d = a(64), f = a(95), g = new (function () { function e() { Object(n.a)(this, e), this.refs = [], this.socket = null, this.default_url = "http://localhost:8000", this.connected = !1, this.initialMemoryState = { objects: new Map, humans: new Map, chatResponse: {}, chats: [{ msg: "", failed: !1 }, { msg: "", failed: !1 }, { msg: "", failed: !1 }, { msg: "", failed: !1 }, { msg: "", failed: !1 }], timelineHandshake: "" }, this.processSensorPayload = this.processSensorPayload.bind(this), this.processMemoryState = this.processMemoryState.bind(this), this.setChatResponse = this.setChatResponse.bind(this), this.setConnected = this.setConnected.bind(this), this.updateStateManagerMemory = this.updateStateManagerMemory.bind(this), this.keyHandler = this.keyHandler.bind(this), this.memory = this.initialMemoryState, this.processRGB = this.processRGB.bind(this), this.processDepth = this.processDepth.bind(this), this.processObjects = this.processObjects.bind(this), this.returnTimelineHandshake = this.returnTimelineHandshake.bind(this); var t = localStorage.getItem("server_url"); "undefined" !== t && void 0 !== t && null !== t || (t = this.default_url), this.setUrl(t), this.fps_time = performance.now() } return Object(i.a)(e, [{ key: "setDefaultUrl", value: function () { localStorage.clear(), this.setUrl(this.default_url) } }, { key: "setUrl", value: function (e) { this.url = e, localStorage.setItem("server_url", e), this.restart(this.url) } }, { key: "restart", value: function (e) { var t = this; this.socket = r.a.connect(e, { transports: ["polling", "websocket"] }); var a = this.socket; a.on("reconnect_attempt", (function () { a.io.opts.transports = ["polling", "websocket"] })), a.on("connect", (function (e) { console.log("connect event"), t.setConnected(!0), t.socket.emit("get_memory_objects") })), a.on("reconnect", (function (e) { console.log("reconnect event"), t.setConnected(!0), t.socket.emit("get_memory_objects") })), a.on("disconnect", (function (e) { console.log("disconnect event"), t.setConnected(!1), t.memory = t.initialMemoryState, t.refs.forEach((function (e) { e.setState(e.initialState), e.forceUpdate() })), console.log("disconnected") })), a.on("setChatResponse", this.setChatResponse), a.on("sensor_payload", this.processSensorPayload), a.on("memoryState", this.processMemoryState), a.on("updateState", this.updateStateManagerMemory), a.on("rgb", this.processRGB), a.on("depth", this.processDepth), a.on("objects", this.processObjects), a.on("returnTimelineHandshake", this.returnTimelineHandshake) } }, { key: "updateStateManagerMemory", value: function (e) { this.memory = e.memory, this.refs.forEach((function (e) { e.forceUpdate() })) } }, { key: "setConnected", value: function (e) { this.connected = e, this.refs.forEach((function (t) { t instanceof u.a && t.setState({ connected: e }) })) } }, { key: "setChatResponse", value: function (e) { this.memory.chats = e.allChats, this.memory.chatResponse[e.chat] = e.chatResponse, this.refs.forEach((function (t) { t instanceof d.a && t.setState({ status: e.status }), t instanceof p.a && t.forceUpdate() })) } }, { key: "returnTimelineHandshake", value: function (e) { this.memory.timelineHandshake = e, this.refs.forEach((function (e) { e instanceof f.a && e.forceUpdate() })) } }, { key: "keyHandler", value: function (e) { var t = []; for (var a in e) { var n = e[a]; a = parseInt(a), !0 === n && (38 === a && t.push("MOVE_FORWARD"), 40 === a && t.push("MOVE_BACKWARD"), 37 === a && t.push("MOVE_LEFT"), 39 === a && t.push("MOVE_RIGHT"), 49 === a && t.push("PAN_LEFT"), 50 === a && t.push("PAN_RIGHT"), 51 === a && t.push("TILT_UP"), 52 === a && t.push("TILT_DOWN")) } t.length > 0 && this.socket.emit("movement command", t) } }, { key: "processMemoryState", value: function (e) { this.refs.forEach((function (t) { t instanceof l.a && t.setState({ isLoaded: !0, memory: e }) })) } }, { key: "processRGB", value: function (e) { var t = new Image; t.src = "data:image/webp;base64," + e, this.refs.forEach((function (e) { e instanceof c.a && "rgb" === e.props.type && e.setState({ isLoaded: !0, rgb: t }) })) } }, { key: "processDepth", value: function (e) { var t = new Image; t.src = "data:image/webp;base64," + e, this.refs.forEach((function (e) { e instanceof c.a && "depth" === e.props.type && e.setState({ isLoaded: !0, depth: t }) })) } }, { key: "processObjects", value: function (e) { var t = new Image; t.src = "data:image/webp;base64," + e.image.rgb, this.refs.forEach((function (a) { a instanceof h.a && a.setState({ isLoaded: !0, objects: e.objects, rgb: t }) })) } }, { key: "processSensorPayload", value: function (e) { var t = this, a = performance.now(), n = 1e3 / (a - this.fps_time); this.fps_time = a; var i = new Image; i.src = "data:image/webp;base64," + e.image.rgb; var o = new Image; o.src = "data:image/webp;base64," + e.image.depth; var r = new Image; return -1 !== e.object_image && void 0 !== e.object_image && (r.src = "data:image/webp;base64," + e.object_image.rgb), this.refs.forEach((function (a) { a instanceof s.a ? a.setState({ isLoaded: !0, memory: t.memory, bot_xyz: [e.x, e.y, e.yaw], obstacle_map: e.map }) : a instanceof u.a ? a.setState({ fps: n }) : a instanceof c.a ? a.setState({ isLoaded: !0, rgb: i, depth: o }) : (a instanceof h.a || a instanceof m.a) && -1 !== e.object_image && void 0 !== e.object_image && a.setState({ isLoaded: !0, rgb: r, objects: e.objects, humans: e.humans }) })), "OK" } }, { key: "connect", value: function (e) { this.refs.push(e) } }]), e }()); t.a = g }, 373: function (e, t, a) { }, 386: function (e, t, a) { "use strict"; a.r(t); var n = a(0), i = a.n(n), o = a(16), r = a.n(o), s = a(135), l = a.n(s), c = (a(194), a(195), a(7)), u = a(8), h = a(11), m = a(10), p = a(50), d = a(66), f = a(76), g = a(64), v = function (e) { Object(h.a)(a, e); var t = Object(m.a)(a); function a(e) { var n; return Object(c.a)(this, a), (n = t.call(this, e)).state = { rgb: null, depth: null, objects: null, humans: null }, n } return Object(u.a)(a, [{ key: "render", value: function () { var e = this.props.stateManager; return i.a.createElement("div", null, i.a.createElement(g.a, { stateManager: e }), i.a.createElement(p.a, { type: "rgb", height: 320, width: 320, offsetH: 400, offsetW: 10, stateManager: e }), i.a.createElement(p.a, { type: "depth", height: 320, width: 320, offsetH: 400, offsetW: 340, stateManager: e }), i.a.createElement(d.a, { height: 320, width: 320, offsetH: 730, offsetW: 10, stateManager: e }), i.a.createElement(f.a, { height: 320, width: 320, offsetH: 730, offsetW: 340, stateManager: e })) } }]), a }(i.a.Component), b = a(236), y = a.n(b), E = { echo: { description: "Echo a passed string.", usage: "echo <string>", fn: function () { return "".concat(Array.from(arguments).join(" ")) } } }, _ = function (e) { Object(h.a)(a, e); var t = Object(m.a)(a); function a() { return Object(c.a)(this, a), t.apply(this, arguments) } return Object(u.a)(a, [{ key: "render", value: function () { return i.a.createElement(y.a, { commands: E, promptLabel: "me@locobot:~$ (not connected to anything right now)" }) } }]), a }(i.a.Component), k = a(78), O = a(12), S = a(34), w = function (e) { Object(h.a)(a, e); var t = Object(m.a)(a); function a(e) { var n; return Object(c.a)(this, a), (n = t.call(this, e)).handleSubmit = n.handleSubmit.bind(Object(O.a)(n)), n.navRef = i.a.createRef(), n } return Object(u.a)(a, [{ key: "handleSubmit", value: function (e) { S.a.setUrl(this.state.url), e.preventDefault() } }, { key: "componentDidMount", value: function () { var e = {}, t = function (t) { e[t.keyCode] = "keydown" === t.type }; document.addEventListener("keydown", t), document.addEventListener("keyup", t), setInterval(S.a.keyHandler, 33.33, e) } }, { key: "render", value: function () { return i.a.createElement("div", { ref: this.navRef }, i.a.createElement("p", null, " Use the arrow keys to move the robot around")) } }]), a }(i.a.Component), x = a(63), C = a(97), M = a(117), j = a(427), R = function (e) { Object(h.a)(a, e); var t = Object(m.a)(a); function a(e) { var n; return Object(c.a)(this, a), (n = t.call(this, e)).initialState = { action_dict: {} }, n.state = n.initialState, n.handleSubmit = n.handleSubmit.bind(Object(O.a)(n)), n.querySemanticParser = n.querySemanticParser.bind(Object(O.a)(n)), n.qRef = i.a.createRef(), n } return Object(u.a)(a, [{ key: "querySemanticParser", value: function (e) { this.setState({ action_dict: e.action_dict }) } }, { key: "handleSubmit", value: function (e) { var t = document.getElementById("command_input").innerHTML; this.props.stateManager.socket.emit("queryParser", { chat: t }), e.preventDefault() } }, { key: "componentDidMount", value: function () { this.props.stateManager && (this.props.stateManager.connect(this), this.props.stateManager.socket.on("renderActionDict", this.querySemanticParser)) } }, { key: "render", value: function () { return i.a.createElement("div", { ref: this.qRef }, i.a.createElement("p", null, "Enter the command below and click on the button to get the parser output."), i.a.createElement("div", { style: { position: "relative", marginLeft: "20%" } }, i.a.createElement("div", { id: "command_input", contentEditable: "true", style: { backgroundColor: "white", width: "55%", height: "30%", color: "black", marginBottom: "5%" } }), i.a.createElement(j.a, { style: { marginLeft: "10%" }, size: "small", variant: "contained", color: "default", onClick: this.handleSubmit.bind(this) }, "Get the program")), i.a.createElement(M.a, { text: JSON.stringify(this.state.action_dict, null, 1), language: "python", wrapLines: !0, theme: M.b })) } }]), a }(i.a.Component), T = a(94), I = a(113), N = a(43), L = (a(373), a(37)), D = a(114), B = a(52), A = a(435), P = a(24), J = a(41), U = a(430), H = a(433), F = a(432), z = a(431); function V(e) { var t = e.open, a = e.close, n = e.text_to_render; return i.a.createElement(U.a, { open: t, "aria-labelledby": "form-dialog-title" }, i.a.createElement(z.a, { id: "form-dialog-title" }, "Generated Code"), i.a.createElement(F.a, null, i.a.createElement(M.a, { text: n, language: "python", wrapLines: !0, theme: M.b })), i.a.createElement(H.a, null, i.a.createElement(j.a, { onClick: a, color: "secondary" }, "Cancel"))) } var G, W = a(439), Y = a(436), K = a(35), X = a(242), Q = a.n(X), q = function (e, t) { var a = 0; if (!t || "{" !== e.charAt(t)) return -1; for (var n = t; n < e.length; n++) { var i = e.charAt(n); if ("{" === i) a += 1; else if ("}" === i && 0 === (a -= 1)) return n } return -1 }, Z = function (e) { for (var t = e.indexOf("{"); t >= 0 && t < e.length;) { var a = q(e, t); if ((t = e.indexOf("{", a)) < 0) break; e = e.slice(0, a + 1) + "," + e.slice(a + 1), t += 1 } return e }, $ = function (e) { for (var t = e.indexOf("{"), a = 0; t >= 0 && t < e.length;) { a += 1; var n = q(e, t); if (n < 0) break; t = e.indexOf("{", n) } return a }, ee = a(51), te = a.n(ee), ae = a(68), ne = a(69), ie = a(3), oe = a.n(ie), re = a(182), se = a.n(re), le = (a(230), a(22)), ce = a.n(le), ue = { Location: "Location", Boolean: "Boolean", Number: "Number", String: "String", CommandDict: "CommandDict", Time: "Time", Mob: "Mob", BlockObject: "BlockObject", Filter: "Filter" }, he = (G = {}, Object(B.a)(G, ue.Location, [["x", "X"], ["y", "Y"], ["z", "Z"], ["pitch", "PITCH"], ["yaw", "YAW"]]), Object(B.a)(G, ue.Time, [["time (ticks)", "TICKS"], ["time (seconds)", "SECONDS"], ["time (minutes)", "MINUTES"], ["time (hours)", "HOURS"], ["time (days)", "DAYS"], ["time string (hh:mm:ss)", "TIME"]]), Object(B.a)(G, ue.Mob, [["location", "LOC"], ["location X", "X"], ["location Y", "Y"], ["location Z", "Z"], ["type", "TYPE"], ["name", "NAME"]]), Object(B.a)(G, ue.BlockObject, [["location", "LOC"], ["location X", "X"], ["location Y", "Y"], ["location Z", "Z"], ["name", "NAME"], ["size", "SIZE"], ["color", "COLOR"]]), G), me = ue, pe = function (e) { e.label = null; var t = function () { window.openSetLabelModal_ ? window.openSetLabelModal_(e) : console.error("Could not find modal opening function.") }, a = function () { var t = te.a.Xml.domToText(te.a.Xml.blockToDom(e)), a = '<xml xmlns="https://developers.google.com/blockly/xml">'.concat(t, "</xml>"); window.saveBlockToDatabase_(a, e.label) }, n = function () { e.setCollapsed(!1), e.getDescendants().forEach((function (e) { return e.setCollapsed(!1) })) }; e.customContextMenu = function (i) { var o = i.findIndex((function (e) { return "Add Comment" === e.text })); i.splice(o, 1); var r = i.findIndex((function (e) { return "Collapse Block" === e.text || "Expand Block" === e.text })); i.splice(r, 1); var s = { text: "Expand All", enabled: !!e.collapsed_, callback: n }; i.unshift(s); var l = { text: (e.collapsed_ ? "Expand" : "Collapse") + " Block", enabled: !0, callback: function () { return t = !e.collapsed_, void (e.label || e.collapsed_ ? e.setCollapsed(t) : window.openSetLabelModal_(e, "Please add a label before collapsing the block.")); var t } }; i.unshift(l); var c = { text: "Add Label", enabled: !0, callback: t }; i.unshift(c); var u = { text: "Save Block", enabled: !!e.label, callback: a }; return i.push(u), i }, e.setOnChange((function (t) { var a, n, i = t.type === te.a.Events.CREATE || t.type === te.a.Events.CHANGE, o = t.blockId === e.id, r = i && ("field" === t.element || "inline" === t.element) && t.name !== te.a.Block.COLLAPSED_FIELD_NAME, s = (a = t.blockId, (n = e).getDescendants().filter((function (e) { return e.id !== n.id })).map((function (e) { return e.id })).includes(a)), l = (o || s) && r, c = t.type === te.a.Events.MOVE && t.oldParentId !== t.newParentId && s; (l || c) && (e.label = null) })) }, de = { type: "location", message0: "x %1 %2 y %3 %4 z %5", args0: [{ type: "field_number", name: "x", value: 0 }, { type: "input_dummy" }, { type: "field_number", name: "y", value: 0 }, { type: "input_dummy" }, { type: "field_number", name: "z", value: 0 }], inputsInline: !0, output: me.Location, colour: 230, tooltip: "A location in the current bot's coordinate system, given in x, y, and z coordinates.", helpUrl: "", mutator: "labelMutator" }; ie.Blocks.location = { init: function () { this.jsonInit(de), pe(this) } }, ie.JavaScript.location = function (e) { var t = e.getFieldValue("x"), a = e.getFieldValue("y"), n = e.getFieldValue("z"); return ['"location": { "reference_object": { "special_reference": { "coordinate_span": "'.concat(t, ", ").concat(a, ", ").concat(n, '"} } }'), ie.JavaScript.ORDER_NONE] }; var fe = ["blocks", "meters", "feet"], ge = ["seconds", "minutes", "hours", "days", "ticks"], ve = function (e) { return { type: "field_dropdown", name: e, options: fe.map((function (e) { return [e, e.toUpperCase()] })) } }, be = function (e) { return { type: "field_dropdown", name: e, options: [[">", "GREATER_THAN"], ["<", "LESS_THAN"], ["\u2265", "GREATER_THAN_EQUAL"], ["\u2264", "LESS_THAN_EQUAL"], ["=", "EQUAL"], ["\u2260", "NOT_EQUAL"]] } }, ye = function (e) { return { type: "field_dropdown", name: e, options: [["Any", "ANY"], ["Creeper", "CREEPER"], ["Skeleton", "SKELETON"], ["Spider", "SPIDER"], ["Giant", "GIANT"], ["Zombie", "ZOMBIE"], ["Slime", "SLIME"], ["Ghast", "GHAST"], ["Pig Zombie", "PIG_ZOMBIE"], ["Enderman", "ENDERMAN"], ["Cave Spider", "CAVE_SPIDER"], ["Silverfish", "SILVERFISH"], ["Blaze", "BLAZE"], ["Lava Slime", "LAVA_SLIME"], ["Ender Dragon", "ENDER_DRAGON"], ["Wither Boss", "WITHER_BOSS"], ["Bat", "BAT"], ["Witch", "WITCH"], ["Guardian", "GUARDIAN"], ["Pig", "PIG"], ["Sheep", "SHEEP"], ["Cow", "COW"], ["Chicken", "CHICKEN"], ["Squid", "SQUID"], ["Wolf", "WOLF"], ["Mushroom Cow", "MUSHROOM_COW"], ["Snow Man", "SNOW_MAN"], ["Ozelot", "OZELOT"], ["Villager Golem", "VILLAGER_GOLEM"], ["Entity Horse", "ENTITY_HORSE"], ["Rabbit", "RABBIT"], ["Villager", "VILLAGER"]] } }, Ee = { type: "location_relative", message0: "%1 %2 in direction %3 relative to %4", args0: [{ type: "field_number", name: "count", value: 1, min: 0 }, ve("units"), { type: "field_dropdown", name: "direction", options: [["left", "LEFT"], ["right", "RIGHT"], ["up", "UP"], ["down", "DOWN"], ["front", "FRONT"], ["back", "BACK"]] }, { type: "field_dropdown", name: "person", options: [["agent", "AGENT"], ["speaker", "SPEAKER"]] }], output: me.Location, colour: 230, tooltip: "A relative location, specifying a location relative to the agent or speaker.", helpUrl: "", mutator: "labelMutator" }; ie.Blocks.location_relative = { init: function () { this.jsonInit(Ee), pe(this) } }, ie.JavaScript.location_relative = function (e) { var t = e.getFieldValue("count"), a = e.getFieldValue("units"), n = e.getFieldValue("direction"); return ['"location": {\n  "steps": '.concat(t, ',\n  "has_measure": "').concat(a, '",\n  "relative_direction": "').concat(n, '"\n}'), ie.JavaScript.ORDER_NONE] }; var _e = { type: "player_location", message0: "Player Location", output: me.Location, colour: 230, tooltip: "Location in game world of your Minecraft player.", helpUrl: "", mutator: "labelMutator" }; ie.Blocks.player_location = { init: function () { this.jsonInit(_e) } }, ie.JavaScript.player_location = function (e) { return ['"location": { "reference_object": { "special_reference": "SPEAKER" } }', ie.JavaScript.ORDER_NONE] }; var ke = { type: "agent_location", message0: "Agent Location", output: me.Location, colour: 230, tooltip: "Location in game world of the Craftassist bot.", helpUrl: "", mutator: "labelMutator" }; ie.Blocks.agent_location = { init: function () { this.jsonInit(ke) } }, ie.JavaScript.agent_location = function (e) { return ['"location": { "reference_object": { "special_reference": "AGENT" } }', ie.JavaScript.ORDER_NONE] }; var Oe = { type: "agent_move", message0: "move agent towards %1", args0: [{ type: "input_value", name: "pos", check: me.Location }], previousStatement: me.CommandDict, nextStatement: me.CommandDict, style: "loop_blocks", helpUrl: "", tooltip: "Move the agent towards a location.", mutator: "labelMutator" }; ie.Blocks.agent_move = { init: function () { this.jsonInit(Oe), pe(this) } }, ie.JavaScript.agent_move = function (e) { var t = ie.JavaScript.valueToCode(e, "pos", ie.JavaScript.ORDER_NONE); return '{\n  "action_type": "move",\n  '.concat(t, "\n}") }; var Se = { type: "controls_doUntil", message0: "repeat until %1", args0: [{ type: "input_value", name: "BOOL", check: me.Boolean }], message1: "do %1", args1: [{ type: "input_statement", name: "DO" }], previousStatement: null, nextStatement: null, style: "loop_blocks", helpUrl: "", tooltip: "Until a boolean condition is met, repeatedly loop a set of commands.", mutator: "labelMutator" }; ie.Blocks.controls_doUntil = { init: function () { this.jsonInit(Se), pe(this) } }, ie.JavaScript.controls_doUntil = function (e) { var t = ie.JavaScript.valueToCode(e, "BOOL", ie.JavaScript.ORDER_NONE), a = ie.JavaScript.statementToCode(e, "DO"), n = ""; if ($(a) <= 1) { var i = JSON.parse(a); i.control = { stop_condition: JSON.parse(t) }, n = JSON.stringify(i) } else a = Z(a), n = '{ "action_list": { "list": ['.concat(a, '],\n    "control": {\n      "stop_condition": ').concat(t, "\n    }\n  }}"); return n }; var we = { type: "controls_doForever", message0: "do forever %1", args0: [{ type: "input_statement", name: "DO" }], previousStatement: null, nextStatement: null, style: "loop_blocks", helpUrl: "", tooltip: "Repeatedly loop a set of commands.", mutator: "labelMutator" }; ie.Blocks.controls_doForever = { init: function () { this.jsonInit(we), pe(this) } }, ie.JavaScript.controls_doForever = function (e) { var t = "", a = ie.JavaScript.statementToCode(e, "DO"); if ($(a) <= 1) { var n = JSON.parse(a); n.control = { repeat_key: "FOR", repeat_count: "forever" }, t = JSON.stringify(n) } else a = Z(a), t = '{ "action_list": {\n    "list": ['.concat(a, '],\n    "control": {\n      "repeat_key": "FOR",\n      "repeat_count": "forever"\n    }\n  }}'); return t }; var xe = { type: "controls_doNTimes", message0: "repeat %1 times", args0: [{ type: "field_number", name: "REPEATS", value: 1 }], message1: "do %1", args1: [{ type: "input_statement", name: "DO" }], previousStatement: null, nextStatement: null, style: "loop_blocks", helpUrl: "", tooltip: "Loop a set of commands a given amount of times.", mutator: "labelMutator" }; ie.Blocks.controls_doNTimes = { init: function () { this.jsonInit(xe), pe(this) } }, ie.JavaScript.controls_doNTimes = function (e) { var t = e.getFieldValue("REPEATS"), a = "", n = ie.JavaScript.statementToCode(e, "DO"); if ($(n) <= 1) { var i = JSON.parse(n); i.control = { repeat_key: "FOR", repeat_count: t }, a = JSON.stringify(i) } else n = Z(n), a = '{ "action_list": {\n    "list": ['.concat(n, '],\n    "control": {\n      "repeat_key": "FOR",\n      "repeat_count": "').concat(t, '"\n    }\n  }}'); return a }; var Ce = { type: "controls_custom_ifelse", message0: "if %1", args0: [{ type: "input_value", name: "IF", check: me.Boolean }], message1: "then %1", args1: [{ type: "input_statement", name: "DO" }], previousStatement: null, nextStatement: null, style: "logic_blocks", tooltip: "%{BKYCONTROLS_IF_TOOLTIP_2}", helpUrl: "%{BKY_CONTROLS_IF_HELPURL}", extensions: ["controls_if_tooltip"], mutator: "labelMutator" }; ie.Blocks.controls_custom_ifelse = { init: function () { this.jsonInit(Ce), pe(this) } }, ie.JavaScript.controls_custom_ifelse = function (e) { var t = ie.JavaScript.valueToCode(e, "IF", ie.JavaScript.ORDER_NONE), a = ie.JavaScript.statementToCode(e, "DO"), n = ""; if ($(a) <= 1) { var i = JSON.parse(a); i.control = { on_condition: JSON.parse(t) }, n = JSON.stringify(i) } else a = Z(a), n = '{ "action_list": { "list": ['.concat(a, '],\n    "control": {\n      "on_condition": ').concat(t, "\n    }\n  }}"); return n }; var Me = { type: "controls_command", message0: "command %1 %2", args0: [{ type: "input_dummy" }, { type: "input_statement", name: "STEPS" }], colour: 230, tooltip: "Place your command steps in this block.", helpUrl: "", mutator: "labelMutator" }; ie.Blocks.controls_command = { init: function () { this.jsonInit(Me), pe(this), this.setDeletable(!1) } }, ie.JavaScript.controls_command = function (e) { return ie.JavaScript.statementToCode(e, "STEPS") }; var je = { type: "controls_savedCommand", message0: "command %1 %2", args0: [{ type: "input_dummy" }, { type: "input_statement", name: "STEPS" }], colour: 230, previousStatement: null, nextStatement: null, tooltip: "Place your command steps in this block.", helpUrl: "", mutator: "labelMutator" }; ie.Blocks.controls_savedCommand = { init: function () { this.jsonInit(je), pe(this) } }, ie.JavaScript.controls_savedCommand = function (e) { return ie.JavaScript.statementToCode(e, "STEPS") }; var Re = { type: "boolean_proximity", message0: " %1 is %2 %3 %4 from %5", args0: [{ type: "input_value", name: "LOC1", check: me.Location }, be("COMP"), { type: "field_number", name: "NUM_BLOCKS", value: 1, min: 1 }, ve("UNITS"), { type: "input_value", name: "LOC2", check: me.Location }], inputsInline: !0, output: me.Boolean, style: "logic_blocks", tooltip: "Given two locations, returns true if the proximity condition between the two is true.", helpUrl: "", mutator: "labelMutator" }; ie.Blocks.boolean_proximity = { init: function () { this.jsonInit(Re), pe(this) } }, ie.JavaScript.boolean_proximity = function (e) { var t = e.getFieldValue("NUM_BLOCKS"), a = e.getFieldValue("COMP"), n = e.getFieldValue("UNITS"), i = ie.JavaScript.valueToCode(e, "LOC1", ie.JavaScript.ORDER_NONE), o = ie.JavaScript.valueToCode(e, "LOC2", ie.JavaScript.ORDER_NONE); return ['{ "condition": {\n    "condition_type": "COMPARATOR",\n    "input_left" : {"value_extractor": {"distance_between" : [\n      { '.concat(i, " },\n      { ").concat(o, ' }\n    ]}},\n    "input_right": {\n      "value_extractor": ').concat(t, '\n    },\n    "comparison_type": "').concat(a, '",\n    "comparison_measure": "').concat(n, '"\n  }\n}'), ie.JavaScript.ORDER_NONE] }; var Te = { type: "boolean_comparator", message0: "%1 %2 %3", args0: [{ type: "input_value", name: "A", check: [me.Number] }, be("COMP"), { type: "input_value", name: "B", check: [me.Number] }], inputsInline: !0, output: me.Boolean, style: "logic_blocks", helpUrl: "%{BKY_LOGIC_COMPARE_HELPURL}", mutator: "labelMutator" }; ie.Blocks.boolean_comparator = { init: function () { this.jsonInit(Te), pe(this) } }, ie.JavaScript.boolean_comparator = function (e) { var t = ie.JavaScript.valueToCode(e, "A", ie.JavaScript.ORDER_NONE), a = ie.JavaScript.valueToCode(e, "B", ie.JavaScript.ORDER_NONE), n = e.getFieldValue("COMP"); return ['{\n    "condition": {\n      "condition_type": "COMPARATOR",\n      "input_left": {\n        "value_extractor": '.concat(t, '\n      },\n      "input_right": {\n        "value_extractor": ').concat(a, '\n      },\n      "comparison_type": "').concat(n, '"\n    }\n  }'), ie.JavaScript.ORDER_NONE] }; var Ie = { type: "boolean_stringMatches", message0: "%1 text matches %2", args0: [{ type: "input_value", name: "A", check: [me.String] }, { type: "input_value", name: "B", check: [me.String] }], inputsInline: !0, output: me.Boolean, style: "logic_blocks", helpUrl: "", mutator: "labelMutator" }; ie.Blocks.boolean_stringMatches = { init: function () { this.jsonInit(Ie), pe(this) } }, ie.JavaScript.boolean_stringMatches = function (e) { var t = ie.JavaScript.valueToCode(e, "A", ie.JavaScript.ORDER_NONE), a = ie.JavaScript.valueToCode(e, "B", ie.JavaScript.ORDER_NONE); return ['{\n    "condition": {\n      "condition_type": "COMPARATOR",\n      "input_left": { "value_extractor": '.concat(t, ' },\n      "comparison_type": "EQUAL",\n      "input_right": {\n        "value_extractor": ').concat(a, "\n      }\n    }\n  }"), ie.JavaScript.ORDER_NONE] }; var Ne = { type: "boolean_and", message0: "%1 and %2", args0: [{ type: "input_value", name: "A", check: [me.Boolean] }, { type: "input_value", name: "B", check: [me.Boolean] }], inputsInline: !0, output: me.Boolean, style: "logic_blocks", helpUrl: "%{BKY_LOGIC_COMPARE_HELPURL}", mutator: "labelMutator" }; ie.Blocks.boolean_and = { init: function () { this.jsonInit(Ne), pe(this) } }, ie.JavaScript.boolean_and = function (e) { var t = ie.JavaScript.valueToCode(e, "A", ie.JavaScript.ORDER_NONE), a = ie.JavaScript.valueToCode(e, "B", ie.JavaScript.ORDER_NONE); return ['{ "condition": {\n    "condition_type": "AND",\n    "and_condition": [\n      '.concat(t, ",\n      ").concat(a, "\n    ]\n  }}"), ie.JavaScript.ORDER_NONE] }; var Le = { type: "boolean_or", message0: "%1 or %2", args0: [{ type: "input_value", name: "A", check: [me.Boolean] }, { type: "input_value", name: "B", check: [me.Boolean] }], inputsInline: !0, output: me.Boolean, style: "logic_blocks", helpUrl: "%{BKY_LOGIC_COMPARE_HELPURL}", mutator: "labelMutator" }; ie.Blocks.boolean_or = { init: function () { this.jsonInit(Le), pe(this) } }, ie.JavaScript.boolean_or = function (e) { var t = ie.JavaScript.valueToCode(e, "A", ie.JavaScript.ORDER_NONE), a = ie.JavaScript.valueToCode(e, "B", ie.JavaScript.ORDER_NONE); return ['{ "condition": {\n    "condition_type": "OR",\n    "or_condition": [\n      '.concat(t, ",\n      ").concat(a, "\n    ]\n  }}"), ie.JavaScript.ORDER_NONE] }; var De = { type: "boolean_not", message0: "not %1", args0: [{ type: "input_value", name: "A", check: [me.Boolean] }], inputsInline: !0, output: me.Boolean, style: "logic_blocks", helpUrl: "%{BKY_LOGIC_COMPARE_HELPURL}", mutator: "labelMutator" }; ie.Blocks.boolean_not = { init: function () { this.jsonInit(De), pe(this) } }, ie.JavaScript.boolean_not = function (e) { var t = ie.JavaScript.valueToCode(e, "A", ie.JavaScript.ORDER_NONE); return ['{ "condition": {\n    "condition_type": "NOT",\n    "not_condition": '.concat(t, "\n  }}"), ie.JavaScript.ORDER_NONE] }; var Be = { type: "boolean_timeEvent", message0: "game event %1", args0: [{ type: "field_dropdown", name: "EVENT", options: [["sunset", "SUNSET"], ["sunrise", "SUNRISE"], ["day", "DAY"], ["night", "NIGHT"], ["rain", "RAIN"], ["sunny", "SUNNY"]] }], inputsInline: !0, output: me.Boolean, tooltip: "Represents an in-game event happening. Returns true when that event is happening.", style: "logic_blocks", mutator: "labelMutator" }; ie.Blocks.boolean_timeEvent = { init: function () { this.jsonInit(Be), pe(this) } }, ie.JavaScript.boolean_timeEvent = function (e) { var t = e.getFieldValue("EVENT"); return ['{\n    "condition": {\n      "condition_type": "TIME",\n      "special_time_event": "'.concat(t, '"\n    }\n  }'), ie.JavaScript.ORDER_NONE] }; var Ae, Pe = { type: "boolean_timePassed", message0: "%1 %2 have passed", args0: [{ type: "field_number", name: "COUNT", value: 1 }, (Ae = "UNITS", { type: "field_dropdown", name: Ae, options: ge.map((function (e) { return [e, e.toUpperCase()] })) })], inputsInline: !0, output: me.Boolean, style: "logic_blocks", tooltip: "Represents time passing. Returns true after the amount of time specified has passed.", mutator: "labelMutator" }; ie.Blocks.boolean_timePassed = { init: function () { this.jsonInit(Pe), pe(this) } }, ie.JavaScript.boolean_timePassed = function (e) { var t = e.getFieldValue("COUNT"), a = e.getFieldValue("UNITS"); return ['{\n    "condition": {\n      "condition_type": "TIME",\n      "comparison_type": "GREATER_THAN",\n      "input_right": {\n        "value_extractor": "'.concat(t, '"\n      },\n      "comparison_measure": "').concat(a, '"\n    }\n  }'), ie.JavaScript.ORDER_NONE] }; var Je = { type: "value_number", message0: "%1", args0: [{ type: "field_number", name: "NUM", value: 0 }], output: me.Number, helpUrl: "%{BKY_MATH_NUMBER_HELPURL}", style: "math_blocks", tooltip: "%{BKY_MATH_NUMBER_TOOLTIP}", extensions: ["parent_tooltip_when_inline"], mutator: "labelMutator" }; ie.Blocks.value_number = { init: function () { this.jsonInit(Je), pe(this) } }, ie.JavaScript.value_number = function (e) { return [e.getFieldValue("NUM").toString(), ie.JavaScript.ORDER_NONE] }; var Ue = { type: "value_textj", message0: "%1", args0: [{ type: "field_input", name: "TEXT", value: "" }], output: me.String, style: "math_blocks", extensions: ["parent_tooltip_when_inline"], mutator: "labelMutator" }; ie.Blocks.value_text = { init: function () { this.jsonInit(Ue), pe(this) } }, ie.JavaScript.value_text = function (e) { var t = e.getFieldValue("TEXT"); return ['"'.concat(t, '"'), ie.JavaScript.ORDER_NONE] }; var He = Object.values(he).reduce((function (e, t) { return t.forEach((function (t) { return !e.find((function (e) { return e && e[0] === t[0] })) && e.push(t) })), e }), []), Fe = { type: "value_accessor", message0: "%1 get value of %2", args0: [{ type: "input_value", name: "OBJ", check: [me.Location, me.Time, me.Mob, me.BlockObject] }, { type: "field_dropdown", name: "FIELD", options: function () { var e = this.getSourceBlock(); if (!e) return He; var t = e.getInputTargetBlock("OBJ"); if (!t) return He; var a = t.outputConnection.getCheck(); return a ? a.includes(me.Location) ? he[me.Location] : a.includes(me.Time) ? he[me.Time] : a.includes(me.Mob) ? he[me.Mob] : a.includes(me.BlockObject) ? he[me.BlockObject] : He : He } }], output: null, helpUrl: "", style: "math_blocks", tooltip: "Get a field of a given object.", mutator: "labelMutator" }; ie.Blocks.value_accessor = { init: function () { this.jsonInit(Fe), pe(this) } }; var ze = function (e, t) { var a = Object(ae.a)({ output: { memory_node: "ReferenceObject", attribute: t } }, function (e) { var t = JSON.parse(e); if (t.reference_object) return t.reference_object.filters ? t.reference_object.filters : {}; console.error("Accessor not provided with reference object.") }(e)), n = JSON.stringify(a); return '{ "filters": '.concat(n, " }") }; ie.JavaScript.value_accessor = function (e) { var t = e.getInputTargetBlock("OBJ").outputConnection.getCheck(); if (t.length < 0) return console.error("Accessor input has no type."), ["", ie.JavaScript.ORDER_NONE]; var a = t[0], n = ie.JavaScript.valueToCode(e, "OBJ", ie.JavaScript.ORDER_NONE), i = e.getFieldValue("FIELD"), o = ""; switch (a) { case me.Mob: case me.BlockObject: o = function (e, t) { var a = ""; switch (t) { case "LOC": a = '"location": '.concat(e); break; case "X": a = ze(e, "x"); break; case "Y": a = ze(e, "y"); break; case "Z": a = ze(e, "z"); break; case "NAME": a = ze(e, "tag"); break; case "TYPE": a = ze(e, "name"); break; case "SIZE": a = ze(e, "size"); break; case "COLOR": a = ze(e, "color"); break; default: console.warn("Unsupported field used in accessor. Returning empty form.") }return a }(n, i); break; case me.Location: o = function (e, t) { var a = e.indexOf("{"), n = e.slice(a), i = JSON.parse(n); if (i.reference_object) { if ("AGENT" === i.reference_object.special_reference) return '{ "filters": {\n      "output": {\n        "memory_node": "SelfNode",\n        "attribute": "'.concat(t.toLowerCase(), '"\n    } }'); if ("SPEAKER" === i.reference_object.special_reference) return '{ "filters": {\n      "output": {\n        "memory_node": "PlayerNode",\n        "attribute": "'.concat(t.toLowerCase(), '"\n    } }'); var o = i.reference_object.special_reference.coordinate_span.split(", "), r = Object(L.a)(o, 3), s = r[0], l = r[1], c = r[2]; return '"'.concat("X" === t ? s : "Y" === t ? l : c, '"') } return console.warn("The accessor is not yet supported for relative locations. Using default value 1."), "1" }(n, i); break; default: console.error("Accessor block given unsupported type.") }return [o, ie.JavaScript.ORDER_NONE] }; var Ve = { type: "value_mob", message0: "mob %1", args0: [ye("MOBTYPE")], message1: "with name %1", args1: [{ type: "field_input", name: "NAME", value: "" }], output: me.Mob, helpUrl: "", colour: 40, tooltip: "Represents a mob in the Minecraft game. Use with accessor block to extract values.", mutator: "labelMutator" }; ie.Blocks.value_mob = { init: function () { this.jsonInit(Ve), pe(this) } }, ie.JavaScript.value_mob = function (e) { var t = ie.JavaScript.valueToCode(e, "MOBTYPE", ie.JavaScript.ORDER_NONE), a = ie.JavaScript.valueToCode(e, "NAME", ie.JavaScript.ORDER_NONE); return ['{ "reference_object": {\n    "filters": {\n      '.concat("ANY" !== t && '"has_name": '.concat(t, ","), "\n      ").concat(a && '"has_tag": '.concat(a, ","), "\n    }\n  } }"), ie.JavaScript.ORDER_NONE] }; var Ge = { type: "value_closestMob", message0: "closest %1 to %2", args0: [ye("MOBTYPE"), { type: "input_value", name: "LOC", check: [me.Location] }], output: me.Mob, inputsInline: !0, helpUrl: "", colour: 40, tooltip: "Represents the closest mob to the given position in the Minecraft game. Use with accessor block to extract values.", mutator: "labelMutator" }; ie.Blocks.value_closestMob = { init: function () { this.jsonInit(Ge), pe(this) } }, ie.JavaScript.value_closestMob = function (e) { var t = e.getFieldValue("MOBTYPE"), a = ie.JavaScript.valueToCode(e, "LOC", ie.JavaScript.ORDER_NONE); return ['{ "reference_object": {\n    "filters": {\n      "has_name": "'.concat(t, '",\n      "argmin" : {\n        "ordinal" : "FIRST",\n        "quantity" : {\n          "linear_extent" : {\n            ').concat(a, "\n          }\n        }\n      }\n    }\n  } }"), ie.JavaScript.ORDER_NONE] }; var We = { type: "value_blockObject", message0: "block object", message1: "filters %1", args1: [{ type: "input_statement", name: "FILTERS", check: [me.Filter] }], output: me.BlockObject, inputsInline: !0, helpUrl: "", colour: 40, tooltip: "Represents a group of blocks in the world. Use with accessor block to extract values.", mutator: "labelMutator" }; ie.Blocks.value_blockObject = { init: function () { this.jsonInit(We), pe(this) } }, ie.JavaScript.value_blockObject = function (e) { var t = ie.JavaScript.statementToCode(e, "FILTERS"); return ['{ "reference_object": {\n    "filters": {\n      '.concat(t.slice(0, -2), "\n    }\n  }}"), ie.JavaScript.ORDER_NONE] }; var Ye = { type: "value_filterColor", message0: "has color %1", args0: [{ type: "field_input", name: "COLOR", check: [me.String] }], inputsInline: !0, previousStatement: me.Filter, nextStatement: me.Filter, helpUrl: "", colour: 40, tooltip: "Filter option for filtering by reference object color. Use with block object block.", mutator: "labelMutator" }; ie.Blocks.value_filterColor = { init: function () { this.jsonInit(Ye), pe(this) } }, ie.JavaScript.value_filterColor = function (e) { var t = e.getFieldValue("COLOR"); return '"has_color": "'.concat(t, '",\n') }; var Ke = { type: "value_filterLocation", message0: "at location %1", args0: [{ type: "input_value", name: "LOC", check: [me.Location] }], inputsInline: !0, previousStatement: me.Filter, nextStatement: me.Filter, helpUrl: "", colour: 40, tooltip: "Filter option for filtering by reference object location. Use with block object block.", mutator: "labelMutator" }; ie.Blocks.value_filterLocation = { init: function () { this.jsonInit(Ke), pe(this) } }, ie.JavaScript.value_filterLocation = function (e) { var t = ie.JavaScript.valueToCode(e, "LOC", ie.JavaScript.ORDER_NONE); return "".concat(t, ",\n") }; var Xe = { type: "value_filterName", message0: "has name %1", args0: [{ type: "field_input", name: "NAME" }], inputsInline: !0, previousStatement: me.Filter, nextStatement: me.Filter, helpUrl: "", colour: 40, tooltip: "Filter option for filtering by reference object name. Use with block object block.", mutator: "labelMutator" }; ie.Blocks.value_filterName = { init: function () { this.jsonInit(Xe), pe(this) } }, ie.JavaScript.value_filterName = function (e) { var t = e.getFieldValue("NAME"); return '"has_name": "'.concat(t, '",\n') }; var Qe = { type: "value_filterSize", message0: "has size %1", args0: [{ type: "field_input", name: "SIZE", check: [me.String] }], inputsInline: !0, previousStatement: me.Filter, nextStatement: me.Filter, helpUrl: "", colour: 40, tooltip: "Filter option for filtering by reference object size. Use with block object block.", mutator: "labelMutator" }; ie.Blocks.value_filterSize = { init: function () { this.jsonInit(Qe), pe(this) } }, ie.JavaScript.value_filterSize = function (e) { var t = e.getFieldValue("SIZE"); return '"has_size": "'.concat(t, '",\n') }; var qe = { type: "value_filterCoreference", message0: "contains coreference", args0: [], inputsInline: !0, previousStatement: me.Filter, nextStatement: me.Filter, helpUrl: "", colour: 40, tooltip: "Filter option for filtering by whether or not the object has a coreference. Use with block object block.", mutator: "labelMutator" }; ie.Blocks.value_filterCoreference = { init: function () { this.jsonInit(qe), pe(this) } }, ie.JavaScript.value_filterCoreference = function (e) { return '"contains_coreference": "yes",\n' }; var Ze = { type: "gameplay_clock", message0: "Clock", output: me.Time, helpUrl: "", colour: 20, tooltip: "Gets the time of day. Use with accessor or compare blocks.", mutator: "labelMutator" }; ie.Blocks.gameplay_clock = { init: function () { this.jsonInit(Ze) } }, ie.JavaScript.gameplay_clock = function (e) { return ["", ie.JavaScript.ORDER_NONE] }; var $e = { type: "gameplay_gameTime", message0: "Game time %1", args0: [{ type: "field_dropdown", name: "TIME", options: [["sunrise", "SUNRISE"], ["day", "DAY"], ["noon", "NOON"], ["sunset", "SUNSET"], ["night", "NIGHT"], ["midnight", "MIDNIGHT"]] }], output: me.Time, helpUrl: "", colour: 20, tooltip: "Gets the time of day. Use with accessor or compare blocks.", mutator: "labelMutator" }; ie.Blocks.gameplay_gameTime = { init: function () { this.jsonInit($e) } }, ie.JavaScript.gameplay_gameTime = function (e) { return ["", ie.JavaScript.ORDER_NONE] }; var et = { type: "gameplay_timer", message0: "Timer", output: me.Time, helpUrl: "", colour: 20, tooltip: 'Gets current value of timer. Use with accessor or compare blocks. Set timer with "Start Timer" block.', mutator: "labelMutator" }; ie.Blocks.gameplay_timer = { init: function () { this.jsonInit(et) } }, ie.JavaScript.gameplay_timer = function (e) { return ["", ie.JavaScript.ORDER_NONE] }; var tt = { type: "gameplay_startTimer", message0: "Start Timer", previousStatement: null, nextStatement: null, helpUrl: "", colour: 20, tooltip: 'Starts a timer. Use "Timer" block to access current time.', mutator: "labelMutator" }; ie.Blocks.gameplay_startTimer = { init: function () { this.jsonInit(tt) } }, ie.JavaScript.gameplay_startTimer = function (e) { return ["", ie.JavaScript.ORDER_NONE] }; var at = { type: "gameplay_stopTimer", message0: "Stop Timer", previousStatement: null, nextStatement: null, helpUrl: "", colour: 20, tooltip: 'Stops the current timer without resetting it. Use "Timer" block to access current time.', mutator: "labelMutator" }; ie.Blocks.gameplay_stopTimer = { init: function () { this.jsonInit(at) } }, ie.JavaScript.gameplay_stopTimer = function (e) { return ["", ie.JavaScript.ORDER_NONE] }; var nt = { type: "gameplay_resetTimer", message0: "Reset Timer", previousStatement: null, nextStatement: null, helpUrl: "", colour: 20, tooltip: 'Resets and stops the current timer. Use "Timer" block to access current time.', mutator: "labelMutator" }; ie.Blocks.gameplay_resetTimer = { init: function () { this.jsonInit(nt) } }, ie.JavaScript.gameplay_resetTimer = function (e) { return ["", ie.JavaScript.ORDER_NONE] }; var it = ie.BlockSvg.prototype.updateCollapsed_; ie.BlockSvg.prototype.oldUpdateCollapsed_ = it, ie.BlockSvg.prototype.updateCollapsed_ = function () { if (this.label) { for (var e, t = this.isCollapsed(), a = ie.Block.COLLAPSED_INPUT_NAME, n = ie.Block.COLLAPSED_FIELD_NAME, i = 0; e = this.inputList[i]; i++)e.name !== a && e.setVisible(!t); if (!t) return void this.removeInput(a); for (var o, r = this.getIcons(), s = 0; o = r[s]; s++)o.setVisible(!1); var l = this.label, c = this.getField(n); if (c) return void c.setValue(l); (this.getInput(a) || this.appendDummyInput(a)).appendField(new ie.FieldLabel(l), n) } else this.oldUpdateCollapsed_() }; var ot = { mutationToDom: function () { var e = document.createElement("mutation"), t = this.label; return t && e.setAttribute("label", t), e }, domToMutation: function (e) { var t = e.getAttribute("label"); t && (this.label = t) } }; te.a.Extensions.registerMutator("labelMutator", ot); var rt = function () { return i.a.createElement(i.a.Fragment, null, i.a.createElement(lt, { name: "Booleans" }, i.a.createElement(st, { type: "boolean_proximity" }), i.a.createElement(st, { type: "boolean_timeEvent" }), i.a.createElement(st, { type: "boolean_timePassed" }), i.a.createElement(st, { type: "boolean_comparator" }), i.a.createElement(st, { type: "boolean_stringMatches" }), i.a.createElement(st, { type: "boolean_and" }), i.a.createElement(st, { type: "boolean_or" }), i.a.createElement(st, { type: "boolean_not" })), i.a.createElement(lt, { name: "Control" }, i.a.createElement(st, { type: "controls_custom_ifelse" }), i.a.createElement(st, { type: "controls_doUntil" }), i.a.createElement(st, { type: "controls_doForever" }), i.a.createElement(st, { type: "controls_doNTimes" })), i.a.createElement(lt, { name: "Location" }, i.a.createElement(st, { type: "location" }), i.a.createElement(st, { type: "location_relative" }), i.a.createElement(st, { type: "player_location" }), i.a.createElement(st, { type: "agent_location" })), i.a.createElement(lt, { name: "Actions" }, i.a.createElement(st, { type: "agent_move" })), i.a.createElement(lt, { name: "Values" }, i.a.createElement(st, { type: "value_number" }), i.a.createElement(st, { type: "value_text" }), i.a.createElement(st, { type: "value_accessor" }), i.a.createElement(st, { type: "value_mob" }), i.a.createElement(st, { type: "value_closestMob" }), i.a.createElement(lt, { name: "Block Object" }, i.a.createElement(st, { type: "value_blockObject" }), i.a.createElement(st, { type: "value_filterColor" }), i.a.createElement(st, { type: "value_filterLocation" }), i.a.createElement(st, { type: "value_filterName" }), i.a.createElement(st, { type: "value_filterSize" }), i.a.createElement(st, { type: "value_filterCoreference" })))) }; oe.a.setLocale(se.a); var st = function (e) { var t = e.children, a = Object(ne.a)(e, ["children"]); return i.a.createElement("block", Object.assign({ is: "blockly" }, a), t) }, lt = function (e) { var t = e.children, a = e.name, n = Object(ne.a)(e, ["children", "name"]); return i.a.createElement("category", Object.assign({ is: "blockly", name: a }, n), t) }, ct = i.a.forwardRef((function (e, t) { var a = e.initialXml, o = e.children, r = Object(ne.a)(e, ["initialXml", "children"]), s = Object(n.useRef)(), l = Object(n.useRef)(); return Object(n.useEffect)((function () { t.current = oe.a.inject(s.current, Object(ae.a)({ toolbox: l.current }, r)), a && oe.a.Xml.domToWorkspace(oe.a.Xml.textToDom(a), t.current) }), []), i.a.createElement(i.a.Fragment, null, i.a.createElement("div", { id: "blocklyDiv", ref: s }), i.a.createElement("xml", { xmlns: "https://developers.google.com/blockly/xml", is: "blockly", style: { display: "none" }, ref: l }, o)) })), ut = a(434); function ht(e) { var t = e.block, a = e.open, o = e.closeModal, r = e.saveBlockToDatabase, s = e.error, l = t && t.label || "", c = Object(n.useState)(""), u = Object(L.a)(c, 2), h = u[0], m = u[1]; Object(n.useEffect)((function () { m(l) }), [l]); var p = function () { t.setCollapsed(!1), t.setCollapsed(!0), m(""), o() }; return i.a.createElement(U.a, { open: a, onClose: o, "aria-labelledby": "form-dialog-title" }, i.a.createElement(z.a, { id: "form-dialog-title" }, "Label Block"), i.a.createElement(F.a, null, i.a.createElement(ut.a, null, "Type a name for the block you right-clicked on in the box below. Once you add a label, you can save the label, or save the block to the database with the label you wrote."), i.a.createElement(ut.a, { color: "error" }, s), i.a.createElement(Y.a, { autoFocus: !0, margin: "dense", id: "name", label: "Block Label", type: "text", value: h, onChange: function (e) { return m(e.target.value) }, fullWidth: !0 })), i.a.createElement(H.a, null, i.a.createElement(j.a, { onClick: o, color: "secondary" }, "Cancel"), i.a.createElement(j.a, { onClick: function () { t.label = h, p() }, color: "secondary", disabled: !h }, "Save Label"), i.a.createElement(j.a, { onClick: function () { t.label = h; var e = te.a.Xml.domToText(te.a.Xml.blockToDom(t)), a = '<xml xmlns="https://developers.google.com/blockly/xml">'.concat(e, "</xml>"); r(a, h), p() }, color: "secondary", disabled: !h }, "Save Block"))) } var mt = a(440), pt = function (e) { var t = e.tagsList, a = e.setTagsList, o = Object(A.a)((function (e) { return { formLabel: { color: "#ffffff" }, formHelperText: { color: "#ffffff" }, formInput: { color: "#ffffff" } } }))(), r = Object(n.useState)(""), s = Object(L.a)(r, 2), l = s[0], c = s[1], u = function () { var e = Object(n.useRef)(0); return { getNextKey: function () { return e.current++, e.current } } }().getNextKey, h = function (e) { return function () { a((function (t) { return t.filter((function (t) { return t.tag !== e.tag })) })) } }; return i.a.createElement("div", null, i.a.createElement("form", { onSubmit: function (e) { e.preventDefault(), l && !t.find((function (e) { return e.tag === l })) && a((function (e) { return e.concat([{ tag: l, key: u() }]) })), c("") } }, i.a.createElement(Y.a, { size: "small", variant: "outlined", label: "Tag", InputLabelProps: { className: o.formLabel }, FormHelperTextProps: { className: o.formHelperText }, InputProps: { className: o.formInput }, helperText: "Keywords that will find your command in searches.", value: l, onChange: function (e) { return c(e.target.value) }, style: { maxWidth: "320px", marginRight: "20px", marginBottom: "10px" } }), i.a.createElement(j.a, { type: "submit", variant: "contained", color: "secondary" }, "Add Tag"), i.a.createElement("span", { style: { display: "flex", maxHeight: "40px", overflow: "scroll", flexWrap: "wrap" } }, t.map((function (e) { return i.a.createElement(mt.a, { label: e.tag, onDelete: h(e), key: e.key, style: { marginLeft: "10px", marginBottom: "10px" } }) }))))) }, dt = '<xml xmlns="https://developers.google.com/blockly/xml"></xml>', ft = Object(A.a)((function (e) { return { gridRoot: { backgroundColor: "#333333", maxHeight: "calc(50vh - 64px)", minHeight: "calc(50vh - 64px)" }, right: { padding: e.spacing(3, 5, 1), display: "flex", justifyContent: "space-between", flexDirection: "column", overflow: "scroll" }, left: { padding: e.spacing(3, 5, 1), display: "flex", justifyContent: "space-between", flexDirection: "column", overflow: "scroll" }, savedCommandsTitle: { margin: e.spacing(3, 5, 1) }, search: Object(B.a)({ position: "relative", borderRadius: e.shape.borderRadius, backgroundColor: "#fff", "&:hover": { backgroundColor: Object(P.c)("#ffffff", .75) }, marginRight: e.spacing(2), marginLeft: 0, width: "100%" }, e.breakpoints.up("sm"), { marginLeft: e.spacing(3), width: "auto" }), searchIcon: { padding: e.spacing(0, 2), height: "100%", position: "absolute", pointerEvents: "none", display: "flex", alignItems: "center", justifyContent: "center" }, inputRoot: { color: "inherit" }, inputInput: Object(B.a)({ padding: e.spacing(1, 1, 1, 0), paddingLeft: "calc(1em + ".concat(e.spacing(4), "px)"), transition: e.transitions.create("width"), width: "100%", color: "#000000", textAlign: "left" }, e.breakpoints.up("md"), { width: "20ch" }), searchResult: { "&:hover": { backgroundColor: "#D8D8D8" }, padding: e.spacing(1, 2, 1), margin: e.spacing(0, 3), cursor: "pointer" }, searchResultList: { maxHeight: "calc(50vh - 154px)", overflow: "scroll", color: "#ffffff" }, formLabel: { color: "#ffffff" }, formHelperText: { color: "#ffffff" }, formInput: { color: "#ffffff" } } })), gt = function (e) { var t = e.classes, a = e.commandText, n = e.setCommandText, o = e.logCode, r = e.saveCommand, s = e.statusMessage, l = e.tagsList, c = e.setTagsList; return i.a.createElement(J.a, { item: !0, xs: !0, className: t.left }, i.a.createElement("div", null, i.a.createElement(K.a, { variant: "h5", style: { marginBottom: "10px", color: "#ffffff" } }, "Command Information"), i.a.createElement(Y.a, { id: "standard-basic", label: "Command Text", InputLabelProps: { className: t.formLabel }, FormHelperTextProps: { className: t.formHelperText }, InputProps: { className: t.formInput }, helperText: "The chat message that will make the bot perform your command.", value: a, onChange: function (e) { return n(e.target.value) }, style: { paddingBottom: "20px", maxWidth: "500px", color: "#ffffff" } }), i.a.createElement(pt, { tagsList: l, setTagsList: c })), i.a.createElement("div", { style: { marginBottom: "20px", alignSelf: "flex-end", display: "flex", alignItems: "center" } }, i.a.createElement(K.a, { variant: "body1", style: { marginRight: "10px", display: "inline", fontStyle: "italic" } }, s), i.a.createElement(j.a, { size: "small", onClick: r, variant: "contained", color: "secondary", style: { marginRight: "10px" } }, "Save Command"), i.a.createElement(j.a, { size: "small", onClick: o, variant: "contained", color: "secondary", style: { marginRight: "10px" } }, "Generate Code"), i.a.createElement(j.a, { size: "small", variant: "contained", color: "secondary" }, i.a.createElement(I.b, { to: "/teach_welcome", style: { color: "inherit", textDecoration: "none" }, target: "_blank", rel: "noopener noreferrer" }, "View Docs")))) }, vt = function (e) { var t = e.classes, a = e.query, n = e.setQuery, o = e.addBlockToWorkspace, r = e.commandsList; return i.a.createElement(J.a, { item: !0, xs: !0, className: t.right }, i.a.createElement(K.a, { variant: "h5", className: t.savedCommandsTitle }, "Saved Commands"), i.a.createElement("div", { className: t.search }, i.a.createElement("div", { className: t.searchIcon }, i.a.createElement(Q.a, null)), i.a.createElement(W.a, { placeholder: "Search\u2026", classes: { root: t.inputRoot, input: t.inputInput }, value: a, onChange: function (e) { return n(e.target.value) }, inputProps: { "aria-label": "search" } })), i.a.createElement("div", { className: t.searchResultList }, 0 === r.length ? i.a.createElement("div", null, "There are no commands yet.") : Object(D.a)(r).reverse().map((function (e) { return i.a.createElement("div", { className: t.searchResult, key: e.cmd_id, onClick: function () { return o(e) } }, e.chat_message || "Untitled command") })))) }, bt = function (e) { var t = e.username, a = e.stateManager, o = e.updatedCommandList, r = Object(n.useState)(""), s = Object(L.a)(r, 2), l = s[0], c = s[1], u = Object(n.useState)(""), h = Object(L.a)(u, 2), m = h[0], p = h[1], d = Object(n.useState)(""), f = Object(L.a)(d, 2), g = f[0], v = f[1], b = Object(n.useState)([]), y = Object(L.a)(b, 2), E = y[0], _ = y[1], k = Object(n.useState)([]), O = Object(L.a)(k, 2), S = O[0], w = O[1], x = Object(n.useState)(null), C = Object(L.a)(x, 2), M = C[0], j = C[1], R = Object(n.useState)(null), T = Object(L.a)(R, 2), I = T[0], N = T[1], D = Object(n.useRef)(), B = Object(n.useRef)(), A = Object(n.useState)(!1), P = Object(L.a)(A, 2), U = P[0], H = P[1], F = Object(n.useState)({}), z = Object(L.a)(F, 2), G = z[0], W = z[1], Y = ft(), K = Object(n.useCallback)((function (e, t, a) { var n = { query: m }; t.socket.emit("fetchCommand", n), e(a) }), [m]); Object(n.useEffect)((function () { K(_, a, o) }), [m]), Object(n.useEffect)((function () { window.openSetLabelModal_ = function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null; j(e), N(t) }, window.saveBlockToDatabase_ = Q }), []); var X = function () { var e = ce.a.workspaceToCode(B.current), t = e.length; return ";" === e.charAt(t - 1) ? e = e.slice(0, t - 1) : ";" === e.charAt(t - 2) && (e = e.slice(0, t - 2) + e.slice(t - 1)), '{ "dialogue_type": "HUMAN_GIVE_COMMAND",\n  "actions": {\n    "list": ['.concat(Z(e), "]\n  }\n}") }, Q = function (e, n) { var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null, o = { chat_message: n, block_assembly: e, username: t, tags_list: S.map((function (e) { return e.tag })) }; if (i && (o.action_dict = i), D.current && (clearTimeout(D.current), D.current = null), e === dt) return v("Command block not found."), void (D.current = setTimeout((function () { return v("") }), 5e3)); a.socket.emit("saveCommand", o) }; return i.a.createElement(i.a.Fragment, null, i.a.createElement(J.a, { container: !0, alignItems: "flex-start", className: Y.gridRoot }, i.a.createElement(gt, { classes: Y, commandText: l, setCommandText: c, logCode: function () { H(!0), W(X()) }, saveCommand: function () { var e = X(), t = function () { var e = B.current.getAllBlocks().find((function (e) { return "controls_command" === e.type })); if (!e) return console.error("Couldn't find a top-level command block."), dt; e.type = "controls_savedCommand"; var t = te.a.Xml.domToText(te.a.Xml.blockToDom(e)), a = '<xml xmlns="https://developers.google.com/blockly/xml">'.concat(t, "</xml>"); return e.type = "controls_command", a }(); Q(t, l, e), K(_, a, o), w([]), c("") }, statusMessage: g, tagsList: S, setTagsList: w }), i.a.createElement(vt, { classes: Y, query: m, setQuery: p, addBlockToWorkspace: function (e) { var t = te.a.Xml.textToDom(e.block_assembly), a = te.a.Xml.appendDomToWorkspace(t, B.current), n = B.current.getBlockById(a[0]); n && (n.label = e.chat_message, n.setCollapsed(!1), n.setCollapsed(!0), n.setDeletable(!0)) }, commandsList: E })), i.a.createElement(ct, { ref: B, readOnly: !1, trashcan: !0, move: { scrollbars: !0, drag: !0, wheel: !0 }, initialXml: '\n<xml xmlns="http://www.w3.org/1999/xhtml">\n      <block type="controls_command"></block>\n</xml>\n' }, i.a.createElement(rt, null)), i.a.createElement(V, { open: U, close: function () { H(!1) }, text_to_render: G }), i.a.createElement(ht, { open: null !== M, closeModal: function () { return j(null) }, block: M, error: I, saveBlockToDatabase: Q })) }, yt = Object(A.a)((function (e) { return { wrapper: { margin: "24px 72px 8px", maxWidth: "80vw", "&>:not(img)": { maxWidth: "1000px" } } } })), Et = function () { var e = yt(); return i.a.createElement("div", { className: e.wrapper }, i.a.createElement("h1", { id: "teach-the-bot" }, "Teach the Bot"), i.a.createElement("br", null), i.a.createElement("p", null, "Welcome to the Teach tool", " ", i.a.createElement("span", { role: "img", "aria-label": "Smiling Emoji" }, "\ud83d\ude03", " "), i.a.createElement("br", null), i.a.createElement("br", null), "This tool is designed to provide users with a way to directly program the bot (or agent), allowing for another type of human-in-the-loop learning. The tool has a specific focus on conditional statements and booleans, using constructs like while...until loops to build out functionality for conditional control flow."), i.a.createElement("p", null, i.a.createElement("strong", null, "The Basics"), ": To use the tool, drag and drop pieces from the categories in the toolbox to program the bot. Then, save your command and upload it to the bot (upload feature coming soon)."), i.a.createElement("br", null), i.a.createElement("h2", { id: "accessing-the-tool" }, "Accessing the Tool"), i.a.createElement("br", null), i.a.createElement(j.a, { variant: "contained", color: "secondary" }, i.a.createElement(I.b, { to: "/teach", style: { color: "inherit", textDecoration: "none" } }, "Go to App")), i.a.createElement("br", null), i.a.createElement("br", null), i.a.createElement("h2", { id: "parts-of-the-tool" }, "Parts of the Tool"), i.a.createElement("p", null, i.a.createElement("img", { src: "/files/teach_sections_labeled.png", alt: "Labeled Sections of App", style: { maxWidth: "100%" } })), i.a.createElement("h3", { id: "1-command-info-panel" }, "1. Command Info Panel"), i.a.createElement("p", null, "The command info panel, located in the top left, has a few important pieces:"), i.a.createElement("ol", null, i.a.createElement("li", null, "Command text: the chat message associated with the command being built"), i.a.createElement("li", null, "Add tags: add searchable tags to your current command. Once your command is saved, you can type these tags in the search box to bring your command up in the results."), i.a.createElement("li", null, 'Save command: saves the command currently being built in the workspace under the "command" block'), i.a.createElement("li", null, "Generate code: generates and logs the logical form for the current command")), i.a.createElement("h3", { id: "2-command-search-panel" }, "2. Command Search Panel"), i.a.createElement("p", null, "The command search panel, located in the top right, is where you can find the commands that you and other users have saved during their use of the tool. Type the name of the command, label, or tag in the search bar, and you'll see the command (and others with similar search terms) pop up in the results. You can then scroll through and select the block you want, and click it to repopulate it into the command builder."), i.a.createElement("p", null, i.a.createElement("em", null, "New Commands"), ": If you want to build a fairly big new command, this is the place to start. Search for the functionality you need; it may already exist within the tool!"), i.a.createElement("h3", { id: "3-command-builder" }, "3. Command Builder"), i.a.createElement("p", null, "The command builder, located in the bottom half of the screen, is the core of the tool. It uses a drag-and-drop interface to build commands."), i.a.createElement("h4", { id: "toolbox-categories" }, "Toolbox & Categories"), i.a.createElement("p", null, 'On the left of the command builder, the grey area represents the toolbox. This is the "drag" area of the tool, where you can find the pieces of commands and drag them into the workspace. The different blocks are organized into 6 different categories:'), i.a.createElement("ol", null, i.a.createElement("li", null, "Actions: actions the bot can take"), i.a.createElement("li", null, "Booleans: conditions for control flow"), i.a.createElement("li", null, "Control: blocks that affect what happens when, e.g. loops and if statements"), i.a.createElement("li", null, "Location: blocks related to location in the bot's world"), i.a.createElement("li", null, 'Values: blocks that represent values, like 0 and "hello"', i.a.createElement("ul", null, i.a.createElement("li", null, 'Also includes "object"-related blocks to represent objects in the bot\'s world, like mobs and block objects'), i.a.createElement("li", null, "Block objects have their own subcategory due to them needing a wide variety of filters to work correctly")))), i.a.createElement("h4", { id: "workspace" }, "Workspace"), i.a.createElement("p", null, "The workspace is the right-hand side of the command builder. It's the blank white space into which you can drag any of the blocks from the toolbox. To build a command, simply drag any block from the toolbox into this white space. Keep doing this and you'll have a command built!"), i.a.createElement("p", null, "The workspace provides some other special features to enhance the drag-and-drop experience. They're listed below:"), i.a.createElement("p", null, i.a.createElement("em", null, "Command Block:"), " This block is part of every command you create. When you click \"Save Command\", the blocks inside here are the command steps which will actually get saved. Any blocks outside this will be ignored. You can't delete this block because it's necessary for saving to work."), i.a.createElement("p", null, i.a.createElement("em", null, "Right-Click Menu:"), " Blocks provide a custom menu on right-click that provides some special features. Some of the features are self-explanatory clipboard options (duplicate, delete) and the others are outlined below."), i.a.createElement("p", null, i.a.createElement("em", null, "Types:"), " Certain blocks only fit into certain spaces, although they may look like they fit anywhere. This is because blocks have", " ", i.a.createElement("em", null, "types"), '; a block that outputs a "Location" type won\'t fit into a block that accepts a "Number" type.'), i.a.createElement("p", null, i.a.createElement("em", null, "Labels and Collapsing Blocks:"), ' Every block can have a label associated with it. Once you give a block a label, you can "collapse" it, changing its appearance from the block-by-block command you built to a compact block with a single text label on it. To do this, right-click on the block, then click "Add Label", or "Collapse Block" if it already has a label. Don\'t worry, you can revert to the original state the same way, by right clicking the block and selecting "Collapse Block". You can also save blocks you\'ve labeled directly to the database in the pop-up window generated by the "Add Label" option.'), i.a.createElement("p", null, i.a.createElement("em", null, "Clipboard Tools:"), ' Each block can be "highlighted" by a click, allowing basic clipboard controls to be used on it. This includes control-C (command-C on Mac) for copy, control-V/command-V for paste, backspace/delete for delete, and control-X/command-X for cut.'), i.a.createElement("h3", { id: "4-nav-bar" }, "4. Nav Bar"), i.a.createElement("p", null, "The nav bar is a simple tool to help one get around the site. Use the menu in the top left to access the Chat app, and the settings button in the top right to visit the settings page for the application.")) }, _t = a(245), kt = Object(_t.a)({ palette: { primary: { main: "#ffffff" }, secondary: { main: "#5f5f5f" } } }), Ot = a(428), St = function (e) { Object(h.a)(a, e); var t = Object(m.a)(a); function a(e) { var n; return Object(c.a)(this, a), (n = t.call(this, e)).initialState = { username: "dashboard", updatedCommandList: [] }, n.state = n.initialState, n.qRef = i.a.createRef(), n.updateCommandList = n.updateCommandList.bind(Object(O.a)(n)), n } return Object(u.a)(a, [{ key: "updateCommandList", value: function (e) { this.setState({ updatedCommandList: e.commandList }) } }, { key: "componentDidMount", value: function () { this.props.stateManager && (this.props.stateManager.connect(this), this.props.stateManager.socket.on("updateSearchList", this.updateCommandList)) } }, { key: "render", value: function () { return i.a.createElement(I.a, { ref: this.qRef }, i.a.createElement(Ot.a, { theme: kt }, i.a.createElement("div", { ref: this.qRef }, i.a.createElement(N.c, null, i.a.createElement(N.a, { path: "/teach_welcome" }, i.a.createElement(Et, null)), i.a.createElement(N.a, { path: "/" }, i.a.createElement(bt, { username: this.state.username, stateManager: this.props.stateManager, updatedCommandList: this.state.updatedCommandList })))))) } }]), a }(n.Component), wt = a(96), xt = a(93), Ct = a(95), Mt = a(243); a(231); if (Mt.isMobile) !function () { window.React = i.a, window.ReactDOM = r.a; var e = { settings: { showPopoutIcon: !1 }, content: [{ type: "column", content: [{ type: "row", content: [{ title: "rgb", type: "react-component", component: "rgb", props: { stateManager: S.a, type: "rgb", height: 320, width: 320, offsetH: 0, offsetW: 0 } }, { title: "Memory 2D", type: "react-component", component: "Memory2D", props: { stateManager: S.a } }] }, { title: "InteractApp", type: "react-component", component: "InteractApp", props: { stateManager: S.a } }] }] }, t = new l.a(e); t.registerComponent("rgb", p.a), t.registerComponent("Memory2D", x.a), t.registerComponent("InteractApp", g.a), t.init(), S.a.dashboardLayout = t }(); else { window.React = i.a, window.ReactDOM = r.a; var jt = { settings: { showPopoutIcon: !1 }, content: [{ type: "row", content: [{ title: "Live Viewer", type: "react-component", component: "MainPane", props: { stateManager: S.a } }, { type: "column", content: [{ type: "stack", content: [{ title: "Memory 2D", type: "react-component", component: "Memory2D", props: { stateManager: S.a } }, { title: "Memory List", type: "react-component", component: "MemoryList", props: { stateManager: S.a } }, { title: "Console", type: "react-component", component: "Console" }, { title: "Chat History", type: "react-component", component: "History", props: { stateManager: S.a } }, { title: "Query the Semantic Parser", type: "react-component", component: "QuerySemanticParser", props: { stateManager: S.a } }, { title: "Timeline", type: "react-component", component: "Timeline", props: { stateManager: S.a } }, { title: "Program the assistant", type: "react-component", component: "TeachApp", props: { stateManager: S.a } }] }, { type: "stack", content: [{ title: "Settings", type: "react-component", component: "Settings", props: { stateManager: S.a } }, { title: "Navigator", type: "react-component", component: "Navigator", props: { stateManager: S.a } }, { title: "Object Annotation Fixer", type: "react-component", component: "ObjectFixup", props: { stateManager: S.a } }] }] }] }] }, Rt = new l.a(jt); Rt.registerComponent("MainPane", v), Rt.registerComponent("Console", _), Rt.registerComponent("Settings", k.a), Rt.registerComponent("Navigator", w), Rt.registerComponent("Memory2D", x.a), Rt.registerComponent("MemoryList", C.a), Rt.registerComponent("QuerySemanticParser", R), Rt.registerComponent("History", T.a), Rt.registerComponent("TeachApp", St), Rt.registerComponent("ObjectFixup", wt.a), Rt.registerComponent("MemoryDetail", xt.a), Rt.registerComponent("Timeline", Ct.a), Rt.init(), S.a.dashboardLayout = Rt } }, 50: function (e, t, a) { "use strict"; var n = a(7), i = a(8), o = a(12), r = a(11), s = a(10), l = a(0), c = a.n(l), u = a(49), h = a(14), m = function (e) { Object(r.a)(a, e); var t = Object(s.a)(a); function a(e) { var i; return Object(n.a)(this, a), (i = t.call(this, e)).onResize = i.onResize.bind(Object(o.a)(i)), i.initialState = { height: e.height, width: e.width, rgb: null, depth: null }, i.state = i.initialState, i } return Object(i.a)(a, [{ key: "onResize", value: function (e, t, a, n, i) { this.setState({ width: parseInt(a.style.width, 10), height: parseInt(a.style.height, 10) }) } }, { key: "componentDidMount", value: function () { this.props.stateManager && this.props.stateManager.connect(this) } }, { key: "render", value: function () { var e = this.state, t = e.height, a = e.width, n = e.rgb, i = e.depth, o = this.props, r = o.offsetW, s = o.offsetH, l = o.isMobile, m = n; return null === n && null == i ? l ? c.a.createElement("p", null, "Loading...") : c.a.createElement(u.a, { default: { x: r, y: s, width: a, height: t }, lockAspectRatio: !0, onResize: this.onResize }, c.a.createElement("p", null, "Loading...")) : ("depth" === this.props.type && (m = i), l ? c.a.createElement(h.Stage, { width: a, height: t }, c.a.createElement(h.Layer, null, c.a.createElement(h.Image, { image: m, width: a, height: t }))) : c.a.createElement(u.a, { default: { x: r, y: s, width: a, height: t }, lockAspectRatio: !0, onResize: this.onResize }, c.a.createElement(h.Stage, { width: a, height: t }, c.a.createElement(h.Layer, null, c.a.createElement(h.Image, { image: m, width: a, height: t }))))) } }]), a }(c.a.Component); t.a = m }, 63: function (e, t, a) { "use strict"; var n = a(7), i = a(8), o = a(12), r = a(11), s = a(10), l = a(0), c = a.n(l), u = a(14), h = a(118), m = function (e) { Object(r.a)(a, e); var t = Object(s.a)(a); function a(e) { var i; return Object(n.a)(this, a), (i = t.call(this, e)).initialState = { height: 400, width: 600, isLoaded: !1, memory: null, xmin: -10, xmax: 10, ymin: -10, ymax: 10, bot_xyz: [0, 0, 0], tooltip: null }, i.state = i.initialState, i.outer_div = c.a.createRef(), i.resizeHandler = i.resizeHandler.bind(Object(o.a)(i)), i } return Object(i.a)(a, [{ key: "resizeHandler", value: function () { if (this.props.isMobile) { var e = this.props.dimensions; (void 0 !== e && e !== this.state.height || void 0 !== e && e !== this.state.width) && this.setState({ height: e, width: e }) } else if (null != this.outer_div && null != this.outer_div.current) { var t = this.outer_div.current, a = t.clientHeight, n = t.clientWidth; (void 0 !== a && a !== this.state.height || void 0 !== n && n !== this.state.width) && this.setState({ height: a, width: n }) } } }, { key: "componentDidMount", value: function () { this.props.stateManager && this.props.stateManager.connect(this), void 0 !== this.props.glContainer && this.props.glContainer.on("resize", this.resizeHandler) } }, { key: "componentDidUpdate", value: function (e, t) { var a = this.state.bot_xyz, n = this.state, i = n.xmin, o = n.xmax, r = n.ymin, s = n.ymax, l = a[0], c = a[1], u = !1; l < i && (i = l, u = !0), l > o && (o = l, u = !0), c < r && (r = c, u = !0), c > s && (s = c, u = !0), u && this.setState({ xmin: i, ymin: r, xmax: o, ymax: s }), this.resizeHandler() } }, { key: "render", value: function () { var e = this; if (!this.state.isLoaded) return c.a.createElement("p", null, "Loading"); var t = this.state, a = t.height, n = t.width, i = t.memory, o = t.bot_xyz, r = t.obstacle_map, s = t.tooltip, l = i.objects, m = this.state, p = m.xmin, d = m.xmax, f = m.ymin, g = m.ymax, v = o[1], b = -o[0], y = o[2]; if (0 === a && 0 === n) return c.a.createElement("div", { ref: this.outer_div, style: { height: "100%", width: "100%" } }); v = parseInt((v - p) / (d - p) * n), b = parseInt((b - f) / (g - f) * a), b = a - b; var E = [], _ = [], k = 0; r && r.forEach((function (e) { var t = parseInt((e[0] - p) / (d - p) * n), i = parseInt((e[1] - f) / (g - f) * a); _.push(c.a.createElement(u.Circle, { key: k++, radius: 2, x: t, y: i, fill: "#827f7f" })) })), l.forEach((function (t, i, o) { var r, s = h.a[Math.abs((r = t.label, r.split("").reduce((function (e, t) { return (e = (e << 5) - e + t.charCodeAt(0)) & e }), 0))) % 10], l = t.xyz, m = parseInt((l[2] - p) / (d - p) * n), v = parseInt((-l[0] - f) / (g - f) * a); v = a - v, E.push(c.a.createElement(u.Circle, { key: k++, radius: 3, x: m, y: v, fill: s, onMouseEnter: function (a) { e.setState({ tooltip: JSON.stringify(t, null, 4) }), a.currentTarget.setRadius(6) }, onMouseLeave: function (t) { e.setState({ tooltip: null }), t.currentTarget.setRadius(3) } })) })), E.push(c.a.createElement(u.Circle, { key: k++, radius: 10, x: v, y: b, fill: "red" })), E.push(c.a.createElement(u.Line, { key: k++, x: v, y: b, points: [0, 0, 12, 0], rotation: 180 * -y / Math.PI, stroke: "black" })); for (var O = [], S = 0; S < n / 10; S++)O.push(c.a.createElement(u.Line, { key: 12344 + S, points: [Math.round(10 * S) + .5, 0, Math.round(10 * S) + .5, a], stroke: "#f5f5f5", strokeWidth: 1 })); for (O.push(c.a.createElement(u.Line, { key: 12344 + S++, points: [0, 0, 10, 10] })), k = 0; k < a / 10; k++)O.push(c.a.createElement(u.Line, { key: 12344 + S + k, points: [0, Math.round(10 * k), n, Math.round(10 * k)], stroke: "#ddd", strokeWidth: .5 })); return c.a.createElement("div", { ref: this.outer_div, style: { height: "100%", width: "100%" } }, c.a.createElement(u.Stage, { className: "memory2d", width: n, height: a }, c.a.createElement(u.Layer, { className: "gridLayer" }, O), c.a.createElement(u.Layer, { className: "mapBoundary" }, _), c.a.createElement(u.Layer, { className: "renderedObjects" }, E), c.a.createElement(u.Layer, null, c.a.createElement(u.Text, { text: s, offsetX: -12, offsetY: -12, visible: null != s, shadowEnabled: !0 })))) } }]), a }(c.a.Component); t.a = m }, 64: function (e, t, a) { "use strict"; var n = a(114), i = a(7), o = a(8), r = a(12), s = a(11), l = a(10), c = a(0), u = a.n(c), h = (a(170), a(427)), m = a(250), p = a(246), d = a(425), f = a(249), g = a(142), v = a.n(g), b = a(426), y = a(143), E = a.n(y), _ = (a(171), new window.webkitSpeechRecognition); _.lang = "en-US"; var k = function (e) { Object(s.a)(a, e); var t = Object(l.a)(a); function a(e) { var n; return Object(i.a)(this, a), (n = t.call(this, e)).state = { recognizing: !1 }, n.toggleListen = n.toggleListen.bind(Object(r.a)(n)), n.listen = n.listen.bind(Object(r.a)(n)), n.elementRef = u.a.createRef(), n } return Object(o.a)(a, [{ key: "renderChatHistory", value: function (e) { var t = this; return this.props.chats.map((function (a, n) { return u.a.cloneElement(u.a.createElement(p.a, null, u.a.createElement(f.a, null, a.msg + (a.msg ? "Sent successfully" === e ? " \u2705" : " \u274c" : "")), u.a.createElement(d.a, null, "" !== a.msg ? u.a.createElement(b.a, { edge: "end", "aria-label": "Fail", onClick: function () { return t.props.goToQuestion(n) } }, u.a.createElement(v.a, { className: "cross" })) : null)), { key: n.toString() }) })) } }, { key: "isMounted", value: function () { return null != this.elementRef.current } }, { key: "handleKeyPress", value: function (e) { "Enter" === e.key && (e.preventDefault(), this.handleSubmit()) } }, { key: "componentDidMount", value: function () { document.addEventListener("keypress", this.handleKeyPress.bind(this)) } }, { key: "toggleListen", value: function () { console.log("togglelisten"), this.setState({ recognizing: !this.state.recognizing }, this.listen) } }, { key: "listen", value: function () { this.state.recognizing ? _.start() : _.stop(), _.onresult = function (e) { for (var t = "", a = 0; a < e.results.length; ++a)e.results[a].isFinal && (t += e.results[a][0].transcript); document.getElementById("msg").innerHTML = t }, _.onerror = function (e) { console.log("Error in recognition: " + e.error) } } }, { key: "handleSubmit", value: function () { var e = document.getElementById("msg").innerHTML; "" !== e.replace(/\s/g, "") && (this.props.setInteractState({ msg: e, failed: !1 }), this.props.stateManager.socket.emit("sendCommandToAgent", e), document.getElementById("msg").innerHTML = "") } }, { key: "render", value: function () { return u.a.createElement("div", { className: "Chat" }, u.a.createElement("p", null, "Enter the command to the bot in the input box below, or click the mic button to start/stop voice input."), u.a.createElement("p", null, "Click the x next to the message if the outcome wasn't as expected."), u.a.createElement(E.a, { className: "ASRButton", variant: "contained", color: this.state.recognizing ? "default" : "secondary", fontSize: "large", onClick: this.toggleListen.bind(this) }), u.a.createElement(m.a, null, this.renderChatHistory(this.props.status)), u.a.createElement("div", { contentEditable: "true", className: "Msg single-line", id: "msg", suppressContentEditableWarning: !0 }, " "), u.a.createElement(h.a, { className: "MsgButton", variant: "contained", color: "primary", onClick: this.handleSubmit.bind(this) }, " ", "Submit", " "), u.a.createElement("p", { id: "assistantReply" }, this.props.agent_reply, " ")) } }]), a }(c.Component), O = a(436), S = (a(174), function (e) { Object(s.a)(a, e); var t = Object(l.a)(a); function a(e) { var n; return Object(i.a)(this, a), (n = t.call(this, e)).state = { view: 0, parsing_error: !1, action_dict: {}, feedback: "" }, n } return Object(o.a)(a, [{ key: "finishQuestions", value: function () { var e = { action_dict: this.state.action_dict, parsing_error: this.state.parsing_error, msg: this.props.chats[this.props.failidx].msg, feedback: this.state.feedback }; this.props.stateManager.socket.emit("saveErrorDetailsToDb", e), this.props.goToMessage() } }, { key: "saveFeedback", value: function (e) { this.setState({ feedback: e.target.value }) } }, { key: "renderParsingFail", value: function () { return u.a.createElement("div", null, u.a.createElement("h3", null, " ", "Thanks for letting me know that I didn't understand the command right.", " "), u.a.createElement(h.a, { variant: "contained", color: "primary", onClick: this.finishQuestions.bind(this) }, "Done")) } }, { key: "renderParsingSuccess", value: function () { var e = this; return u.a.createElement("div", null, u.a.createElement("h3", null, " ", "Okay, looks like I understood your command but couldn't follow it all the way through. Tell me more about what I did wrong :", " "), u.a.createElement(O.a, { style: { backgroundColor: "white" }, id: "outlined-uncontrolled", label: "", margin: "normal", variant: "outlined", onChange: function (t) { return e.saveFeedback(t) } }), u.a.createElement("div", null), u.a.createElement(h.a, { variant: "contained", color: "primary", onClick: this.finishQuestions.bind(this) }, "Done")) } }, { key: "renderEnd", value: function () { var e = this; return u.a.createElement("div", null, u.a.createElement("h3", null, " Thanks! Submit any other feedback here: "), u.a.createElement(O.a, { style: { backgroundColor: "white" }, id: "outlined-uncontrolled", label: "", margin: "normal", variant: "outlined", onChange: function (t) { return e.saveFeedback(t) } }), u.a.createElement("div", null), u.a.createElement(h.a, { variant: "contained", color: "primary", onClick: this.finishQuestions.bind(this) }, "Done")) } }, { key: "renderSemanticParserErrorQuestion", value: function () { var e = this, t = this.props.stateManager.memory.chatResponse, a = this.props.chats[this.props.failidx].msg; if (this.setState({ action_dict: t[a] }), this.state.action_dict) if ("dialogue_type" in this.state.action_dict) { var n = this.state.action_dict.dialogue_type, i = ""; if ("HUMAN_GIVE_COMMAND" === n) { var o = this.state.action_dict.action_sequence[0], r = o.action_type.toLowerCase(); i = "to " + r + " ", ["build", "dig"].indexOf(r) >= 0 ? ("schematic" in o && (i = i + "'" + o.schematic.text_span + "'"), "location" in o && (i = i + " at location '" + o.location.text_span + "'"), i += " ?") : ["destroy", "fill", "spawn", "copy", "get", "scout"].indexOf(r) >= 0 ? ("reference_object" in o && (i = i + "'" + o.reference_object.text_span + "'"), "location" in o && (i = i + " at location '" + o.location.text_span + "'"), i += " ?") : ["move"].indexOf(r) >= 0 ? ("location" in o && (i = i + " at location '" + o.location.text_span + "'"), i += " ?") : ["stop", "resume", "undo"].indexOf(r) >= 0 && ("target_action_type" in o && (i = i + " at location '" + o.target_action_type + "'"), i += " ?") } else "GET_MEMORY" === n ? i = "to answer a question about something in the Minecraft world ?" : "PUT_MEMORY" === n ? i = "to remember or learn something you taught it ?" : "NOOP" === n && (i = "to do nothing ?") } else i = "did you want me to do nothing ?"; return u.a.createElement("div", { className: "question" }, u.a.createElement("h5", null, "Did you want the assistant ", i), u.a.createElement(m.a, { className: "answers", component: "nav" }, u.a.createElement(p.a, { button: !0, onClick: function () { return e.answerParsing(1) } }, u.a.createElement(f.a, { primary: "Yes" })), u.a.createElement(p.a, { button: !0, onClick: function () { return e.answerParsing(2) } }, u.a.createElement(f.a, { primary: "No" })))) } }, { key: "answerParsing", value: function (e) { 1 === e ? this.setState({ view: 2 }) : 2 === e && this.setState({ parsing_error: !0, view: 1 }) } }, { key: "goToEnd", value: function (e) { this.setState({ view: 3, new_action_dict: e }) } }, { key: "render", value: function () { return u.a.createElement("div", null, u.a.createElement("div", { className: "msg-header" }, "Message you sent to the bot: ", u.a.createElement("br", null), this.props.chats[this.props.failidx].msg), 0 === this.state.view ? this.renderSemanticParserErrorQuestion() : null, 1 === this.state.view ? this.renderParsingFail() : null, 2 === this.state.view ? this.renderParsingSuccess() : null, 3 === this.state.view ? this.renderEnd() : null) } }]), a }(c.Component)), w = function (e) { Object(s.a)(a, e); var t = Object(l.a)(a); function a(e) { var n; return Object(i.a)(this, a), (n = t.call(this, e)).initialState = { currentView: 1, chatResponse: "", status: "", chats: [{ msg: "", failed: !1 }], failidx: -1, agent_reply: "" }, n.state = n.initialState, n.setAssistantReply = n.setAssistantReply.bind(Object(r.a)(n)), n.MessageRef = u.a.createRef(), n } return Object(o.a)(a, [{ key: "setInteractState", value: function (e) { var t = Object(n.a)(this.state.chats); t.shift(), t.push(e), this.setState({ chats: t }) } }, { key: "setAssistantReply", value: function (e) { this.setState({ agent_reply: e.agent_reply }) } }, { key: "componentDidMount", value: function () { this.props.stateManager && (this.props.stateManager.connect(this), this.props.stateManager.socket.on("showAssistantReply", this.setAssistantReply)) } }, { key: "getUrlParameterByName", value: function (e) { var t = RegExp("[?&]" + e + "=([^&]*)").exec(window.location.search); return t && decodeURIComponent(t[1].replace(/\+/g, " ")) } }, { key: "goToMessage", value: function () { var e = this.state.chats; -1 !== this.state.failidx && (e[this.state.failidx].failed = !0), this.setState({ currentView: 1, chats: e }) } }, { key: "goToQuestion", value: function (e) { this.setState({ currentView: 2, chats: this.state.chats, failidx: e }) } }, { key: "render", value: function () { return u.a.createElement("div", { className: "App" }, u.a.createElement("div", { className: "content" }, 1 === this.state.currentView ? u.a.createElement(k, { status: this.state.status, stateManager: this.props.stateManager, ref: this.MessageRef, chats: this.state.chats, agent_reply: this.state.agent_reply, goToQuestion: this.goToQuestion.bind(this), setInteractState: this.setInteractState.bind(this) }) : null, 2 === this.state.currentView ? u.a.createElement(S, { stateManager: this.props.stateManager, chats: this.state.chats, failidx: this.state.failidx, goToMessage: this.goToMessage.bind(this), failmsg: this.state.chats[this.state.failidx].msg }) : null)) } }]), a }(c.Component); t.a = w }, 66: function (e, t, a) { "use strict"; var n = a(7), i = a(8), o = a(12), r = a(11), s = a(10), l = a(0), c = a.n(l), u = a(49), h = a(14), m = a(118), p = a(96), d = function (e) { Object(r.a)(a, e); var t = Object(s.a)(a); function a(e) { var i; return Object(n.a)(this, a), (i = t.call(this, e)).onResize = i.onResize.bind(Object(o.a)(i)), i.onFixup = i.onFixup.bind(Object(o.a)(i)), i.initialState = { height: e.height, width: e.width, rgb: null, objects: null }, i.state = i.initialState, i } return Object(i.a)(a, [{ key: "onResize", value: function (e, t, a, n, i) { this.setState({ width: parseInt(a.style.width, 10), height: parseInt(a.style.height, 10) }) } }, { key: "onFixup", value: function () { if (this.props.stateManager) { var e = this.props.stateManager, t = void 0; if (e.refs.forEach((function (e) { e instanceof p.a && (t = e) })), void 0 !== t) { t.setState({ image: this.state.rgb }); for (var a = e.dashboardLayout, n = 0; n < a._getAllContentItems().length; n++)if ("ObjectFixup" === a._getAllContentItems()[n].config.component) { var i = a._getAllContentItems()[n]; i.parent.setActiveContentItem(i) } } } } }, { key: "componentDidMount", value: function () { this.props.stateManager && this.props.stateManager.connect(this) } }, { key: "render", value: function () { var e = this.state, t = e.height, a = e.width, n = e.rgb, i = e.objects, o = this.props, r = o.offsetW, s = o.offsetH; if (null === n) return c.a.createElement(u.a, { default: { x: r, y: s, width: a, height: t }, lockAspectRatio: !0, onResize: this.onResize }, c.a.createElement("p", null, "Loading...")); var l = [], p = i; null === i && (p = []); var d = 0; return p.forEach((function (e) { var a = e.id, n = String(a).concat(e.label), i = e.properties, o = n.concat(i).split("").reduce((function (e, t) { return (e = (e << 5) - e + t.charCodeAt(0)) & e }), 0), r = m.a[Math.abs(o % m.a.length)], s = t / 512, u = parseInt(e.bbox[0] * s), p = parseInt(e.bbox[1] * s), f = parseInt(e.bbox[2] * s), g = parseInt(e.bbox[3] * s) - p, v = f - u; l.push(c.a.createElement(h.Rect, { key: d, x: u, y: p, width: v, height: g, fillEnabled: !1, stroke: r })), l.push(c.a.createElement(h.Text, { key: [d++, n], text: n.concat("\n", i), x: u, y: p, fill: r, fontSize: 10 })) })), c.a.createElement(u.a, { default: { x: r, y: s, width: a, height: t }, lockAspectRatio: !0, onResize: this.onResize }, c.a.createElement(h.Stage, { width: a, height: t }, c.a.createElement(h.Layer, null, c.a.createElement(h.Image, { image: n, width: a, height: t }), l)), c.a.createElement("button", { onClick: this.onFixup }, "Fix")) } }]), a }(c.a.Component); t.a = d }, 76: function (e, t, a) { "use strict"; var n = a(7), i = a(8), o = a(12), r = a(11), s = a(10), l = a(0), c = a.n(l), u = a(49), h = a(14), m = a(155), p = [["left_ear", "left_eye"], ["right_ear", "right_eye"], ["left_eye", "right_eye"], ["left_eye", "nose"], ["right_eye", "nose"], ["right_shoulder", "right_elbow"], ["right_elbow", "right_wrist"], ["left_shoulder", "left_elbow"], ["left_elbow", "left_wrist"], ["left_shoulder", "left_hip"], ["left_hip", "left_knee"], ["left_knee", "left_ankle"], ["right_shoulder", "right_hip"], ["right_hip", "right_knee"], ["right_knee", "right_ankle"], ["right_hip", "left_hip"], ["right_shoulder", "left_shoulder"]], d = function (e) { Object(r.a)(a, e); var t = Object(s.a)(a); function a(e) { var i; return Object(n.a)(this, a), (i = t.call(this, e)).onResize = i.onResize.bind(Object(o.a)(i)), i.initialState = { height: e.height, width: e.width, rgb: null, humans: null }, i.state = i.initialState, i } return Object(i.a)(a, [{ key: "onResize", value: function (e, t, a, n, i) { this.setState({ width: parseInt(a.style.width, 10), height: parseInt(a.style.height, 10) }) } }, { key: "componentDidMount", value: function () { this.props.stateManager && this.props.stateManager.connect(this) } }, { key: "render", value: function () { var e = this.state, t = e.height, a = e.width, n = e.rgb, i = e.humans, o = this.props, r = o.offsetW, s = o.offsetH, l = o.isMobile; if (null === n) return l ? c.a.createElement("p", null, "Loading... ") : c.a.createElement(u.a, { default: { x: r, y: s, width: a, height: t }, lockAspectRatio: !0, onResize: this.onResize }, c.a.createElement("p", null, "Loading...")); var d = [], f = 0, g = 0; return i.forEach((function (e) { var a = t / 512, n = m.a[f++]; f === m.a.length && (f = 0), p.forEach((function (t) { var i = e.keypoints[t[0]], o = e.keypoints[t[1]], r = [parseInt(i[0] * a), parseInt(i[1] * a), parseInt(o[0] * a), parseInt(o[1] * a)]; d.push(c.a.createElement(h.Line, { key: g++, points: r, stroke: n })) })) })), l ? c.a.createElement(h.Stage, { width: a, height: t }, c.a.createElement(h.Layer, null, c.a.createElement(h.Image, { image: n, width: a, height: t }), d)) : c.a.createElement(u.a, { default: { x: r, y: s, width: a, height: t }, lockAspectRatio: !0, onResize: this.onResize }, c.a.createElement(h.Stage, { width: a, height: t }, c.a.createElement(h.Layer, null, c.a.createElement(h.Image, { image: n, width: a, height: t }), d))) } }]), a }(c.a.Component); t.a = d }, 78: function (e, t, a) { "use strict"; var n = a(7), i = a(8), o = a(12), r = a(11), s = a(10), l = a(0), c = a.n(l), u = (a(213), a(116)), h = (a(214), { width: 600, margin: 50 }), m = { minWidth: "60px", display: "inline-block" }, p = function (e) { Object(r.a)(a, e); var t = Object(s.a)(a); function a(e) { var i; return Object(n.a)(this, a), (i = t.call(this, e)).initialState = { url: i.props.stateManager.url, fps: 0, connected: !1, image_quality: -1, image_resolution: -1 }, i.state = i.initialState, i.handleChange = i.handleChange.bind(Object(o.a)(i)), i.handleSubmit = i.handleSubmit.bind(Object(o.a)(i)), i.setImageSettings = i.setImageSettings.bind(Object(o.a)(i)), i.onImageQualityChange = i.onImageQualityChange.bind(Object(o.a)(i)), i.onImageResolutionChange = i.onImageResolutionChange.bind(Object(o.a)(i)), i } return Object(i.a)(a, [{ key: "setImageSettings", value: function (e) { this.setState(e) } }, { key: "handleChange", value: function (e) { this.setState({ url: e.target.value }) } }, { key: "handleSubmit", value: function (e) { this.props.stateManager.setUrl(this.state.url), e.preventDefault() } }, { key: "handleClearSettings", value: function (e) { this.props.stateManager.setDefaultUrl() } }, { key: "componentDidMount", value: function () { this.props.stateManager && (this.props.stateManager.connect(this), this.setState({ connected: this.props.stateManager.connected }), this.props.stateManager.socket.on("image_settings", this.setImageSettings)) } }, { key: "onImageQualityChange", value: function (e) { !0 === this.state.connected && this.props.stateManager.socket.emit("update_image_settings", { image_quality: e, image_resolution: this.state.image_resolution }) } }, { key: "onImageResolutionChange", value: function (e) { !0 === this.state.connected && this.props.stateManager.socket.emit("update_image_settings", { image_quality: this.state.image_quality, image_resolution: e }) } }, { key: "render", value: function () { var e; e = !0 === this.state.connected ? c.a.createElement("status-indicator", { positive: !0, pulse: !0 }) : c.a.createElement("status-indicator", { negative: !0, pulse: !0 }); var t = !1; return -1 === this.state.image_quality && (t = !0), c.a.createElement("div", null, c.a.createElement("form", { onSubmit: this.handleSubmit }, c.a.createElement("label", null, "Server / Robot URL:", c.a.createElement("input", { type: "text", value: this.state.url, onChange: this.handleChange })), c.a.createElement("input", { type: "submit", value: "Reconnect" })), c.a.createElement("form", { onSubmit: this.handleClearSettings }, c.a.createElement("input", { type: "submit", value: "Clear Saved Settings" })), c.a.createElement("p", null, "FPS: ", this.state.fps), c.a.createElement("p", null, " Connection Status: ", e, " "), c.a.createElement("div", { style: h }, c.a.createElement("label", { style: m }, "Image Quality: \xa0"), c.a.createElement("span", null, this.state.image_quality), c.a.createElement("br", null), c.a.createElement("br", null), c.a.createElement(u.a, { value: this.state.image_quality, min: 1, max: 100, step: 1, onChange: this.onImageQualityChange, disabled: t })), c.a.createElement("div", { style: h }, c.a.createElement("label", { style: m }, "Image Resolution: \xa0"), c.a.createElement("span", null, this.state.image_resolution), c.a.createElement("br", null), c.a.createElement("br", null), c.a.createElement(u.a, { value: this.state.image_resolution, min: 16, max: 512, step: 16, onChange: this.onImageResolutionChange, disabled: t }))) } }]), a }(c.a.Component); t.a = p }, 93: function (e, t, a) { "use strict"; var n = a(37), i = a(7), o = a(8), r = a(11), s = a(10), l = a(0), c = a.n(l), u = a(41), h = a(35); function m(e) { return null === e.value || void 0 === e.value ? null : c.a.createElement(c.a.Fragment, null, c.a.createElement(u.a, { item: !0, xs: 4, s: 4 }, c.a.createElement(h.a, { variant: "button", align: "right" }, e.title)), c.a.createElement(u.a, { item: !0, xs: 8, s: 8 }, c.a.createElement(h.a, { variant: "body1", align: "left" }, e.value))) } var p = function (e) { Object(r.a)(a, e); var t = Object(s.a)(a); function a() { return Object(i.a)(this, a), t.apply(this, arguments) } return Object(o.a)(a, [{ key: "render", value: function () { var e = (0, Object(n.a)(this.props.memoryManager, 3)[2])(this.props.uuid); return c.a.createElement(u.a, { container: !0, spacing: 2, style: { padding: "16px" } }, c.a.createElement(u.a, { item: !0, xs: 11 }, c.a.createElement(h.a, { variant: "h4", align: "left" }, "Attributes")), c.a.createElement(m, { title: "UUID", value: e.data[0] }), c.a.createElement(m, { title: "ID", value: e.data[1] }), c.a.createElement(m, { title: "X", value: e.data[2] }), c.a.createElement(m, { title: "Y", value: e.data[3] }), c.a.createElement(m, { title: "Z", value: e.data[4] }), c.a.createElement(m, { title: "Yaw", value: e.data[5] }), c.a.createElement(m, { title: "Pitch", value: e.data[6] }), c.a.createElement(m, { title: "Type", value: e.data[9] }), c.a.createElement(m, { title: "Name", value: e.data[7] }), c.a.createElement(u.a, { item: !0, xs: 12 }, c.a.createElement(h.a, { variant: "h4", align: "left" }, "Triples")), c.a.createElement(u.a, { item: !0, xs: 4 }, c.a.createElement(h.a, { variant: "button", align: "left" }, "Predicate")), c.a.createElement(u.a, { item: !0, xs: 4 }, c.a.createElement(h.a, { variant: "button", align: "left" }, "Value")), c.a.createElement(u.a, { item: !0, xs: 4 }, c.a.createElement(h.a, { variant: "button", align: "left" }, "Confidence")), e.triples.map((function (e) { return c.a.createElement(c.a.Fragment, null, c.a.createElement(u.a, { item: !0, xs: 4 }, c.a.createElement(h.a, { variant: "body2", align: "left" }, e[4])), c.a.createElement(u.a, { item: !0, xs: 4 }, c.a.createElement(h.a, { variant: "body2", align: "left" }, e[6])), c.a.createElement(u.a, { item: !0, xs: 4 }, c.a.createElement(h.a, { variant: "body2", align: "left" }, e[7]))) }))) } }]), a }(c.a.Component); t.a = p }, 94: function (e, t, a) { "use strict"; var n = a(7), i = a(8), o = a(11), r = a(10), s = a(0), l = a.n(s), c = a(250), u = a(246), h = a(249), m = (a(179), function (e) { Object(o.a)(a, e); var t = Object(r.a)(a); function a() { return Object(n.a)(this, a), t.apply(this, arguments) } return Object(i.a)(a, [{ key: "renderChatHistory", value: function () { return this.props.stateManager.memory.chats.map((function (e, t) { return l.a.cloneElement(l.a.createElement(u.a, { alignItems: "flex-start" }, l.a.createElement("div", { className: "chatItem" }, "" !== e.msg ? l.a.createElement(h.a, { primary: e.msg }) : null)), { key: t.toString() }) })) } }, { key: "componentDidMount", value: function () { this.props.stateManager && this.props.stateManager.connect(this) } }, { key: "render", value: function () { return l.a.createElement("div", { className: "history" }, l.a.createElement("p", null, "The history of the last 5 commands sent to the bot."), l.a.createElement(c.a, null, this.renderChatHistory())) } }]), a }(l.a.Component)); t.a = m }, 95: function (e, t, a) { "use strict"; var n = a(7), i = a(8), o = a(11), r = a(10), s = a(0), l = a.n(s), c = function (e) { Object(o.a)(a, e); var t = Object(r.a)(a); function a() { return Object(n.a)(this, a), t.apply(this, arguments) } return Object(i.a)(a, [{ key: "renderHandshake", value: function () { return this.props.stateManager.socket.emit("receiveTimelineHandshake", "Sent message!"), this.props.stateManager.memory.timelineHandshake } }, { key: "componentDidMount", value: function () { this.props.stateManager && this.props.stateManager.connect(this) } }, { key: "render", value: function () { return l.a.createElement("div", { className: "timeline" }, l.a.createElement("p", null, "A visualizer where users can easily view, inspect, and search through agent activities interactively."), l.a.createElement("p", null, "Handshake status: ", this.renderHandshake())) } }]), a }(l.a.Component); t.a = c }, 96: function (e, t, a) { "use strict"; var n = a(7), i = a(8), o = a(11), r = a(10), s = a(0), l = a.n(s), c = a(12), u = (a(168), a(169), function (e) { Object(o.a)(a, e); var t = Object(r.a)(a); function a(e) { var i; return Object(n.a)(this, a), (i = t.call(this, e)).state = { selectedTags: [], suggestions: [], currentValue: "" }, i.inputRef = l.a.createRef(), i } return Object(i.a)(a, [{ key: "render", value: function () { var e = this; return l.a.createElement("div", { className: "tag-selector" }, l.a.createElement("div", { className: "tag-holder" }, this.state.selectedTags.map((function (t) { return l.a.createElement("span", { class: "tag-selected" }, t, l.a.createElement("button", { onClick: function () { e.removeTag(t) } }, "X")) }))), l.a.createElement("input", { type: "text", placeholder: "Tags (press Enter to add)", ref: this.inputRef, onChange: this.update.bind(this), onKeyDown: this.keyDown.bind(this) }), l.a.createElement("div", { className: "tag-suggestions" }, this.state.suggestions.map((function (t) { return l.a.createElement("span", null, l.a.createElement("button", { onClick: function () { e.addTag(t) } }, t)) })))) } }, { key: "update", value: function (e) { var t = this, a = this.inputRef.current.value; 0 !== a.length ? this.setState({ suggestions: this.props.tags.filter((function (e) { return e.toLowerCase().slice(0, a.length) === a && -1 === t.state.selectedTags.indexOf(e) })) }) : this.setState({ suggestions: [] }) } }, { key: "removeTag", value: function (e) { var t = this; this.setState({ selectedTags: this.state.selectedTags.filter((function (t) { return t !== e })) }, (function () { t.props.update(t.state.selectedTags) })) } }, { key: "addTag", value: function (e) { var t = this; e = e.toLowerCase(), this.setState({ selectedTags: this.state.selectedTags.concat(e), suggestions: [] }, (function () { t.props.update(t.state.selectedTags) })), this.inputRef.current.value = "" } }, { key: "keyDown", value: function (e) { "Enter" === e.key && "" !== this.inputRef.current.value.trim() && this.addTag(this.inputRef.current.value), this.setState({ currentValue: this.inputRef.current.value }) } }]), a }(l.a.Component)), h = function (e) { Object(o.a)(a, e); var t = Object(r.a)(a); function a(e) { var i; return Object(n.a)(this, a), (i = t.call(this, e)).labels = [], i.tags = [], i.nameRef = l.a.createRef(), i } return Object(i.a)(a, [{ key: "render", value: function () { var e = this; return l.a.createElement("div", { className: "data-entry-root", style: { top: this.props.y + "px", left: this.props.x + "px", position: "fixed" } }, l.a.createElement("input", { placeholder: "Object Name", ref: this.nameRef }), l.a.createElement(u, { tags: this.labels, update: function (t) { return e.tags = t } }), l.a.createElement("button", { className: "data-entry-submit", onClick: this.submit.bind(this) }, "Submit")) } }, { key: "submit", value: function () { var e = this.nameRef.current.value.trim(); 0 !== e.length ? this.tags.length < 2 ? alert("Please enter at least 2 descriptive tags for the object. Examples include: color, shape, size, orientation, etc.") : this.props.onSubmit({ name: e.toLowerCase(), tags: this.tags }) : alert("You must enter the object's name") } }]), a }(l.a.Component), m = function (e) { Object(o.a)(a, e); var t = Object(r.a)(a); function a(e) { var i; return Object(n.a)(this, a), (i = t.call(this, e)).update = i.update.bind(Object(c.a)(i)), i.onClick = i.onClick.bind(Object(c.a)(i)), i.onMouseMove = i.onMouseMove.bind(Object(c.a)(i)), i.keyDown = i.keyDown.bind(Object(c.a)(i)), i.drawPoint = i.drawPoint.bind(Object(c.a)(i)), i.drawLine = i.drawLine.bind(Object(c.a)(i)), i.localToImage = i.localToImage.bind(Object(c.a)(i)), i.imageToLocal = i.imageToLocal.bind(Object(c.a)(i)), i.shiftViewBy = i.shiftViewBy.bind(Object(c.a)(i)), i.isDrawingPolygon = !1, i.lastMouse = { x: 0, y: 0 }, i.dragging = !1, i.canvasRef = l.a.createRef(), i.zoomPixels = 300, i.pointSize = 10, i } return Object(i.a)(a, [{ key: "componentDidMount", value: function () { this.canvas = this.canvasRef.current, this.ctx = this.canvas.getContext("2d"), this.points = [], this.img = this.props.img, this.Offset = { x: 0, y: 0 }, this.baseScale = Math.min(this.canvas.width / this.img.width, this.canvas.height / this.img.height), this.scale = this.baseScale, this.update() } }, { key: "render", value: function () { return l.a.createElement("div", null, l.a.createElement("p", null, "Please trace the ", this.props.object), l.a.createElement("canvas", { ref: this.canvasRef, width: "500px", height: "500px", tabIndex: "0", onClick: this.onClick, onMouseMove: this.onMouseMove, onKeyDown: this.keyDown })) } }, { key: "update", value: function () { var e = this; if (this.ctx.resetTransform(), this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height), this.ctx.setTransform(this.scale, 0, 0, this.scale, this.Offset.x, this.Offset.y), this.ctx.drawImage(this.img, 0, 0), "Enter" !== this.lastKey) { for (var t = 0; t < this.points.length - 1; t++)this.drawLine(this.points[t], this.points[t + 1]); this.points.length > 0 && !this.dragging && this.drawLine(this.points[this.points.length - 1], this.localToImage(this.lastMouse)), this.points.forEach((function (t) { e.drawPoint(t) })) } else { if (this.ctx.resetTransform(), this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height), this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height), this.ctx.setTransform(this.baseScale, 0, 0, this.baseScale, 0, 0), this.ctx.drawImage(this.img, 0, 0), this.points.length < 3) return; var a = new Path2D; a.moveTo(this.points[0].x, this.points[0].y); for (var n = 1; n < this.points.length; n++)a.lineTo(this.points[n].x, this.points[n].y); a.closePath(), this.ctx.fillStyle = "rgba(0,200,0,.5)", this.ctx.fill(a, "evenodd") } } }, { key: "updateZoom", value: function () { this.scale = Math.min(this.canvas.width / this.zoomPixels, this.canvas.height / this.zoomPixels), 0 !== this.points.length && (this.Offset = { x: -(this.points[this.points.length - 1].x - this.zoomPixels / 2) * this.scale, y: -(this.points[this.points.length - 1].y - this.zoomPixels / 2) * this.scale }) } }, { key: "onMouseMove", value: function (e) { var t = this.canvas.getBoundingClientRect(); this.lastMouse = { x: e.clientX - t.left, y: e.clientY - t.top + 1 }, this.dragging && (this.points[this.draggingIndex] = this.localToImage(this.lastMouse)), this.update() } }, { key: "onClick", value: function (e) { if (this.dragging) return this.dragging = !1, void this.update(); for (var t = null, a = 0; a < this.points.length; a++)this.distance(this.points[a], this.localToImage(this.lastMouse)) < this.pointSize / 2 && (t = a); if (null != t) return this.dragging = !0, this.draggingIndex = t, void this.update(); "Enter" !== this.lastKey && this.points.push(this.localToImage(this.lastMouse)), this.updateZoom(), this.isDrawingPolygon || (this.points.pop(), this.isDrawingPolygon = !0), this.update(), this.lastKey = "Mouse" } }, { key: "keyDown", value: function (e) { switch (e.key) { case " ": this.points.length > 0 && this.points.pop(); break; case "w": this.shiftViewBy(0, 10); break; case "a": this.shiftViewBy(10, 0); break; case "s": this.shiftViewBy(0, -10); break; case "d": this.shiftViewBy(-10, 0); break; case "Enter": "Enter" === this.lastKey && (this.lastKey = null, this.props.submitCallback(this.points)); break; case "=": this.zoomPixels -= 10, this.updateZoom() }this.lastKey = e.key, this.update() } }, { key: "drawPoint", value: function (e) { this.ctx.fillStyle = "black", this.distance(e, this.localToImage(this.lastMouse)) < this.pointSize / 2 && (this.ctx.fillStyle = "green"), this.ctx.fillRect(e.x - 2.5, e.y - 2.5, 5, 5) } }, { key: "drawLine", value: function (e, t) { this.ctx.beginPath(), this.ctx.moveTo(e.x, e.y), this.ctx.lineTo(t.x, t.y), this.ctx.stroke() } }, { key: "localToImage", value: function (e) { return { x: (e.x - this.Offset.x) / this.scale, y: (e.y - this.Offset.y) / this.scale } } }, { key: "imageToLocal", value: function (e) { return { x: e.x * this.scale + this.Offset.x, y: e.y * this.scale + this.Offset.y } } }, { key: "resetView", value: function () { this.Offset = { x: 0, y: 0 }, this.scale = Math.min(this.canvas.width / this.img.width, this.canvas.height / this.img.height) } }, { key: "shiftViewBy", value: function (e, t) { this.Offset = { x: this.Offset.x + e, y: this.Offset.y + t } } }, { key: "distance", value: function (e, t) { return 2 * Math.max(Math.abs(e.x - t.x), Math.abs(e.y - t.y)) } }]), a }(l.a.Component), p = function (e) { Object(o.a)(a, e); var t = Object(r.a)(a); function a(e) { var i; return Object(n.a)(this, a), (i = t.call(this, e)).update = i.update.bind(Object(c.a)(i)), i.drawLine = i.drawLine.bind(Object(c.a)(i)), i.canvasRef = l.a.createRef(), i.imgRef = l.a.createRef(), i } return Object(i.a)(a, [{ key: "componentDidMount", value: function () { this.canvas = this.canvasRef.current, this.ctx = this.canvas.getContext("2d"), this.Offset = { x: 0, y: 0 }, this.baseScale = this.canvas.width / this.props.img.width, this.scale = this.baseScale, this.canvas.height = this.props.img.height * this.baseScale, this.update() } }, { key: "render", value: function () { return l.a.createElement("div", null, l.a.createElement("canvas", { ref: this.canvasRef, width: "500px", height: "500px", tabIndex: "0", onClick: this.props.onClick, onMouseMove: this.onMouseMove, onKeyDown: this.keyDown })) } }, { key: "update", value: function () { this.ctx.resetTransform(), this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height), this.ctx.setTransform(this.scale, 0, 0, this.scale, this.Offset.x, this.Offset.y), this.ctx.drawImage(this.props.img, 0, 0); for (var e = 0; e < this.props.objects.length; e++) { var t = this.props.pointMap[this.props.objects[e]]; if (t) { var a = this.props.colors[e % this.props.colors.length]; a ? this.drawRegion(t, a) : this.drawRegion(t, "rgba(0,200,0,.5)") } } } }, { key: "drawLine", value: function (e, t) { this.ctx.beginPath(), this.ctx.moveTo(e.x, e.y), this.ctx.lineTo(t.x, t.y), this.ctx.stroke() } }, { key: "drawRegion", value: function (e, t) { if (!(e.length < 3)) { var a = new Path2D; a.moveTo(e[0].x, e[0].y); for (var n = 1; n < e.length; n++)a.lineTo(e[n].x, e[n].y); a.closePath(), this.ctx.fillStyle = t, this.ctx.fill(a, "evenodd") } } }]), a }(l.a.Component), d = ["rgba(0,200,0,.5)", "rgba(200,0,0,.5)", "rgba(0,0,200,.5)", "rgba(200,200,0,.5)", "rgba(0,200,200,.5)", "rgba(200,0,200,.5)", "rgba(150,50,50,.5)", "rgba(255, 153, 0, .5)", "rgba(128,0,128,.5)", "rgba(0,204,255,.5)", "rgba(153,204,0,.5)"], f = function (e) { Object(o.a)(a, e); var t = Object(r.a)(a); function a(e) { var i; return Object(n.a)(this, a), (i = t.call(this, e)).state = { objectIds: [], currentMode: "select", currentOverlay: null }, i.currentId = 0, i.nameMap = {}, i.pointMap = {}, i.propertyMap = {}, i.registerClick = i.registerClick.bind(Object(c.a)(i)), void 0 !== i.props.image ? i.image = i.props.image : (i.image = new Image, i.image.onload = function () { i.forceUpdate() }, i.image.src = i.props.imgUrl), i.overtime = !1, setInterval((function () { i.overtime = !0 }), 6e4 * window.MINUTES), i } return Object(i.a)(a, [{ key: "render", value: function () { var e = this; return "draw_polygon" !== this.state.currentMode ? l.a.createElement("div", null, l.a.createElement("p", null, "Label and outline as ", l.a.createElement("b", null, "many objects as possible."), " Click an object in the image to start. ", this.state.objectIds.length, " ", "object(s) labeled."), this.state.currentOverlay, l.a.createElement(p, { img: this.image, objects: this.state.objectIds, pointMap: this.pointMap, colors: d, onClick: function (t) { return e.registerClick(t.clientX, t.clientY) } }), l.a.createElement("button", { onClick: this.submit.bind(this) }, "Finished annotating objects")) : l.a.createElement(m, { img: this.image, object: this.drawing_data.name, submitCallback: this.drawingFinished.bind(this) }) } }, { key: "registerClick", value: function (e, t) { if ("select" === this.state.currentMode) { var a = l.a.createElement(h, { x: e, y: t, onSubmit: this.dataEntered.bind(this) }); this.setState({ currentMode: "fill_data", currentOverlay: a }) } } }, { key: "dataEntered", value: function (e) { this.drawing_data = e, this.setState({ currentMode: "draw_polygon", currentOverlay: null }) } }, { key: "drawingFinished", value: function (e) { var t = this; this.propertyMap[this.currentId] = this.drawing_data.tags, this.pointMap[this.currentId] = e, this.nameMap[this.currentId] = this.drawing_data.name, this.setState({ currentMode: "select", objectIds: this.state.objectIds.splice(0).concat(this.currentId) }, (function () { t.currentId += 1 })) } }, { key: "submit", value: function () { if (this.state.objectIds.length < window.MIN_OBJECTS) alert("Label more objects, or your HIT may be rejected"); else { var e = { nameMap: this.nameMap, propertyMap: this.propertyMap, pointMap: this.pointMap }; this.props.stateManager.socket.emit("saveObjectAnnotation", e), this.props.not_turk } } }]), a }(l.a.Component), g = function (e) { Object(o.a)(a, e); var t = Object(r.a)(a); function a(e) { var i; return Object(n.a)(this, a), (i = t.call(this, e)).initialState = { image: void 0 }, i.state = i.initialState, i } return Object(i.a)(a, [{ key: "componentDidMount", value: function () { this.props.stateManager && this.props.stateManager.connect(this) } }, { key: "render", value: function () { return void 0 === this.state.image ? null : l.a.createElement(f, { image: this.state.image, not_turk: !0, stateManager: this.props.stateManager }) } }]), a }(l.a.Component); t.a = g }, 97: function (e, t, a) { "use strict"; var n = a(7), i = a(8), o = a(12), r = a(11), s = a(10), l = a(0), c = a.n(l), u = a(37), h = a(68), m = a(69), p = a(52), d = a(6), f = a(13), g = a(437), v = a(89), b = function (e) { Object(r.a)(a, e); var t = Object(s.a)(a); function a() { var e; Object(n.a)(this, a); for (var i = arguments.length, o = new Array(i), r = 0; r < i; r++)o[r] = arguments[r]; return (e = t.call.apply(t, [this].concat(o))).getRowClassName = function (t) { var a = t.index, n = e.props, i = n.classes, o = n.onRowClick; return Object(d.a)(i.tableRow, i.flexContainer, Object(p.a)({}, i.tableRowHover, -1 !== a && null != o)) }, e.cellRenderer = function (t) { var a = t.cellData, n = t.columnIndex, i = e.props, o = i.columns, r = i.classes, s = i.rowHeight, l = i.onRowClick; return c.a.createElement(g.a, { component: "div", className: Object(d.a)(r.tableCell, r.flexContainer, Object(p.a)({}, r.noClick, null == l)), variant: "body", style: { height: s }, align: null != n && o[n].numeric ? "right" : "left" }, a) }, e.headerRenderer = function (t) { var a = t.label, n = t.columnIndex, i = e.props, o = i.headerHeight, r = i.columns, s = i.classes; return c.a.createElement(g.a, { component: "div", className: Object(d.a)(s.tableCell, s.flexContainer, s.noClick), variant: "head", style: { height: o }, align: r[n].numeric ? "right" : "left" }, c.a.createElement("span", null, a)) }, e } return Object(i.a)(a, [{ key: "render", value: function () { var e = this, t = this.props, a = t.height, n = t.width, i = t.classes, o = t.columns, r = t.rowHeight, s = t.headerHeight, l = Object(m.a)(t, ["height", "width", "classes", "columns", "rowHeight", "headerHeight"]); return c.a.createElement(v.c, Object.assign({ height: a, width: n, rowHeight: r, gridStyle: { direction: "inherit" }, size: "small", headerHeight: s, className: i.table }, l, { rowClassName: this.getRowClassName }), o.map((function (t, a) { var n = t.dataKey, o = Object(m.a)(t, ["dataKey"]); return c.a.createElement(v.b, Object.assign({ key: n, headerRenderer: function (t) { return e.headerRenderer(Object(h.a)(Object(h.a)({}, t), {}, { columnIndex: a })) }, className: i.flexContainer, cellRenderer: e.cellRenderer, dataKey: n }, o)) }))) } }]), a }(c.a.PureComponent); b.defaultProps = { headerHeight: 48, rowHeight: 36 }; var y = Object(f.a)((function (e) { return { flexContainer: { display: "flex", alignItems: "center", boxSizing: "border-box" }, table: { "& .ReactVirtualized__Table__headerRow": { flip: !1, paddingRight: "rtl" === e.direction ? "0 !important" : void 0 } }, tableRow: { cursor: "pointer" }, tableRowHover: { "&:hover": { backgroundColor: e.palette.action.hover } }, tableCell: { flex: 1 }, noClick: { cursor: "initial" } } }))(b); function E(e) { var t = e.memoryManager, a = e.onShowMemoryDetail, n = Object(u.a)(t, 2), i = n[0], o = n[1]; return c.a.createElement(v.a, null, (function (e) { var t = e.height, n = e.width; return c.a.createElement(y, { height: t, width: n, rowCount: i(), rowGetter: function (e) { var t, a = e.index; return { uuid: (t = o(a)).data[0], id: t.data[1], type: t.data[9], name: t.data[7] } }, onRowClick: function (e) { e.event, e.index; var t = e.rowData; t && t.uuid && a(t.uuid) }, columns: [{ flexGrow: 1, width: 1, label: "ID", dataKey: "id", numeric: !0 }, { flexGrow: 5, width: 5, label: "Type", dataKey: "type", numeric: !1 }, { flexGrow: 5, width: 5, label: "Name", dataKey: "name", numeric: !1 }] }) })) } var _ = a(148); function k(e, t) { e.memories, e.named_abstractions; var a = e.reference_objects, n = e.triples, i = new Map(a.map((function (e) { return [e[0], { data: e }] }))); n && n.forEach((function (e) { var t = e[1], a = i.get(t); a && (a.triples ? a.triples.push(e) : a.triples = [e]) })); var o = []; if (null != t && t.length > 0) { var r, s = Object(_.a)(i.values()); try { for (s.s(); !(r = s.n()).done;) { var l = r.value; JSON.stringify(l).includes(t) && o.push(l) } } catch (c) { s.e(c) } finally { s.f() } } else o = Array.from(i.values()); return [function () { return o.length }, function (e) { return o[e] }, function (e) { return i.get(e) }] } var O = a(93), S = a(436), w = a(438), x = a(426), C = a(149), M = a.n(C), j = a(429), R = a(245), T = a(428), I = function (e) { Object(r.a)(a, e); var t = Object(s.a)(a); function a(e) { var i; return Object(n.a)(this, a), (i = t.call(this, e)).initialState = { height: 400, width: 600, isLoaded: !1, memory: null, filter: "", showDetail: !1, detailUUID: null }, i.state = i.initialState, i.outer_div = c.a.createRef(), i.resizeHandler = i.resizeHandler.bind(Object(o.a)(i)), i } return Object(i.a)(a, [{ key: "resizeHandler", value: function () { if (null != this.outer_div && null != this.outer_div.current) { var e = this.outer_div.current, t = e.clientHeight, a = e.clientWidth; (void 0 !== t && t !== this.state.height || void 0 !== a && a !== this.state.width) && this.setState({ height: t, width: a }) } } }, { key: "componentDidMount", value: function () { this.props.stateManager && this.props.stateManager.connect(this), void 0 !== this.props.glContainer && this.props.glContainer.on("resize", this.resizeHandler) } }, { key: "componentDidUpdate", value: function (e, t) { this.resizeHandler() } }, { key: "render", value: function () { var e = this; if (!this.state.isLoaded) return c.a.createElement("p", null, "Loading"); var t = this.state, a = t.height, n = t.width, i = t.memory, o = t.isLoaded; if (0 === a && 0 === n) return c.a.createElement("div", { ref: this.outer_div, style: { height: "100%", width: "100%" } }); if (!o) return c.a.createElement("div", { ref: this.outer_div, style: { height: "100%", width: "100%" } }, "Loading..."); var r = Object(R.a)({ palette: { type: "dark" } }), s = new k(i, this.state.filter), l = this.state.height - 24, u = this.state.width - 24, h = function () { e.setState({ showDetail: !1 }) }; return c.a.createElement(T.a, { theme: r }, c.a.createElement(S.a, { style: { borderBlockColor: "white" }, color: "primary", id: "outlined-uncontrolled", label: "Search", margin: "dense", variant: "outlined", onChange: function (t) { e.setState({ filter: t.target.value }) } }), c.a.createElement(E, { height: l, width: u, memoryManager: s, onShowMemoryDetail: function (t) { e.setState({ detailUUID: t, showDetail: !0 }) } }), c.a.createElement(w.a, { anchor: "right", open: this.state.showDetail, onClose: function () { h() } }, c.a.createElement("div", { style: { width: 450 } }, c.a.createElement(x.a, { onClick: function () { return h() } }, c.a.createElement(M.a, null)), c.a.createElement(j.a, null), c.a.createElement(O.a, { memoryManager: s, uuid: this.state.detailUUID })))) } }]), a }(c.a.Component); t.a = I } }, [[265, 154, 0, 156]]]);